System.register([],function(e,t){"use strict";return{execute:function(){var n=document.createElement("style");async function o(e){const t=await fetch(e);if(!t.ok)throw new Error(`Failed to load ${e}`);return await t.text()}n.textContent=":root{--h1-color: black;--background-color: white;--main-text-color: #1F2937;--light-text-color: #D1D1D1;--icon-grey-color: #999999;--progress-circle-color: #F3F4F6;--card-color: white;--app-container-height: calc(100dvh - var(--nav-height));--accent-color: #E35252;--accent-background: #FEF2F2;--circle-stroke: 12px;--nav-height: max(10dvh, 80px);--nav-active-color: brightness(0) saturate(100%) invert(0%) sepia(0%) saturate(0%) hue-rotate(0deg) brightness(0%) contrast(110%);--fill-color: #F3F4F6;--border-color: #E5E7EB;--positive-color: #1BCE86;--positive-text-header: #065F46;--positive-fill-color: #EEFFF6;--positive-border-color: #BBF7D0;--negative-text-header: #AC1A1A;--blocking-color: #FF7C7C;--blocking-fill-color: #FEF2F2;--blocking-border-color: #FECACA;--background-color-cook: #F2EEFF;--background-color-admin: #FEF2F2;--border-color-cook: #C7CDFF;--border-color-admin: #F9BEBE;--section-shadow: rgba(48, 48, 48, .1);--border-radius: 5px;--border-radius-big-card: 15px;--border-radius-overlay: 10px;--border-radius-checkbox: 2px}.dark-mode{--h1-color: #FFFFFF;--background-color: #1A1A1A;--main-text-color: #C8D2E0;--light-text-color: #6B7280;--icon-grey-color: #999999;--progress-circle-color: #232323;--card-color: #232323;--accent-background: #1A1A1A;--circle-stroke: 12px;--nav-height: max(10vh, 80px);--nav-active-color: brightness(0) invert(1);--fill-color: #141414;--border-color: #474747;--positive-color: #1BCE86;--positive-text-header: #1DC254;--positive-fill-color: #1A1A1A;--positive-border-color: #0B5B27;--negative-text-header: #C21D1D;--blocking-color: #FF7C7C;--blocking-fill-color: #1A1A1A;--blocking-border-color: #AA0000;--background-color-cook: #1A1A1A;--border-color-cook: #929dff;--background-color-admin: #1A1A1A;--border-color-admin: #ef5252;--section-shadow: rgba(255, 255, 255, .06);--border-radius: 5px}html{font-size:62.5%}*{margin:0;padding:0;box-sizing:border-box;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}input[type=number]::-webkit-outer-spin-button,input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input,textarea,[contenteditable=true]{user-select:text;-webkit-user-select:text}body{font-family:Poppins,sans-serif;font-weight:500}h1{color:var(--h1-color);font-size:2.4rem;margin:0;font-weight:medium}h3{font-size:1.6rem;color:var(--main-text-color);font-weight:600}.green-card{background-color:#eefff6;border:1px solid #BBF7D0}#blocked-items-card{background-color:#fef2f2;border:1px solid #FECACA}#checked-circle{border:1px solid #D1D5DB}.subtext{color:#6b7280;font-weight:300;font-size:1.4rem}.card{border:1px solid var(--border-color);border-radius:var(--border-radius-big-card);background-color:var(--card-color)}.drop-shadow{box-shadow:0 2px 9.8px rgba(0,0,0,.03)}button{border-radius:15px;font-family:Poppins,sans-serif}.settings{width:30px;height:30px;margin-top:-10px;mask:url(\"data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.2071%204.82141L12.1286%202.44284C12.284%202.04012%2012.5574%201.69372%2012.9129%201.44901C13.2685%201.2043%2013.6898%201.07269%2014.1214%201.07141H15.8786C16.3102%201.07269%2016.7314%201.2043%2017.087%201.44901C17.4426%201.69372%2017.716%202.04012%2017.8714%202.44284L18.7928%204.82141L21.9214%206.62141L24.45%206.2357C24.871%206.17855%2025.2995%206.24786%2025.6811%206.43482C26.0627%206.62178%2026.38%206.91795%2026.5928%207.2857L27.45%208.7857C27.6696%209.1593%2027.7708%209.59072%2027.7402%2010.023C27.7096%2010.4553%2027.5486%2010.8682%2027.2786%2011.2071L25.7143%2013.2V16.8L27.3214%2018.7928C27.5915%2019.1318%2027.7525%2019.5446%2027.7831%2019.9769C27.8137%2020.4092%2027.7125%2020.8407%2027.4928%2021.2143L26.6357%2022.7143C26.4229%2023.082%2026.1055%2023.3782%2025.724%2023.5651C25.3424%2023.7521%2024.9139%2023.8214%2024.4928%2023.7643L21.9643%2023.3786L18.8357%2025.1786L17.9143%2027.5571C17.7589%2027.9598%2017.4855%2028.3062%2017.1299%2028.551C16.7743%2028.7957%2016.3531%2028.9273%2015.9214%2028.9286H14.1214C13.6898%2028.9273%2013.2685%2028.7957%2012.9129%2028.551C12.5574%2028.3062%2012.284%2027.9598%2012.1286%2027.5571L11.2071%2025.1786L8.07856%2023.3786L5.54999%2023.7643C5.12895%2023.8214%204.70043%2023.7521%204.31888%2023.5651C3.93732%2023.3782%203.61996%2023.082%203.40713%2022.7143L2.54999%2021.2143C2.33035%2020.8407%202.22915%2020.4092%202.25976%2019.9769C2.29036%2019.5446%202.45133%2019.1318%202.72141%2018.7928L4.2857%2016.8V13.2L2.67856%2011.2071C2.40847%2010.8682%202.2475%2010.4553%202.2169%2010.023C2.18629%209.59072%202.28749%209.1593%202.50713%208.7857L3.36427%207.2857C3.57711%206.91795%203.89447%206.62178%204.27602%206.43482C4.65757%206.24786%205.08609%206.17855%205.50713%206.2357L8.0357%206.62141L11.2071%204.82141ZM10.7143%2015C10.7143%2015.8476%2010.9656%2016.6762%2011.4365%2017.381C11.9075%2018.0858%2012.5768%2018.6351%2013.3599%2018.9595C14.143%2019.2838%2015.0047%2019.3687%2015.8361%2019.2033C16.6674%2019.038%2017.4311%2018.6298%2018.0304%2018.0304C18.6298%2017.4311%2019.038%2016.6674%2019.2034%2015.8361C19.3687%2015.0047%2019.2838%2014.143%2018.9595%2013.3599C18.6351%2012.5768%2018.0858%2011.9075%2017.381%2011.4365C16.6762%2010.9656%2015.8476%2010.7143%2015%2010.7143C13.8633%2010.7143%2012.7733%2011.1658%2011.9695%2011.9695C11.1658%2012.7733%2010.7143%2013.8633%2010.7143%2015Z'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e\") no-repeat center;-webkit-mask-size:contain;mask-size:contain;background-color:var(--h1-color)}.settings:hover{cursor:pointer}.nav-icons{width:35px;height:35px;filter:brightness(0) saturate(100%) invert(61%) sepia(4%) saturate(464%) hue-rotate(178deg) brightness(99%) contrast(92%);transition:filter .3s ease}#main-nav a.active .nav-icons{filter:var(--nav-active-color)}#main-nav{position:fixed;bottom:0;left:0;right:0;height:var(--nav-height);color:var(--icon-grey-color);border-top:1px solid var(--border-color);display:none;justify-content:center;align-items:flex-start;padding:5px 0 0;gap:45px;z-index:1000;background-color:var(--background-color)}#main-nav a{outline:none;-webkit-tap-highlight-color:transparent;text-decoration:none;position:relative;padding:8px;border-radius:8px;transition:all .3s ease;cursor:pointer}#main-nav.hiddenNav{display:none}#main-nav.showNav{display:flex;background-color:var(--background-color)}#main-nav a.active:after{content:\"\";position:absolute;bottom:1px;left:50%;transform:translate(-50%);width:40px;height:2px;background-color:var(--main-text-color);border-radius:1px}.nav-overlay{position:fixed;bottom:0;left:0;right:0;height:var(--nav-height);width:100%;background-color:rgba(0,0,0,.8);display:flex;justify-content:center;align-items:flex-start;z-index:1000}.roboto{font-family:Roboto,sans-serif;font-optical-sizing:auto;font-weight:500;font-size:3.6rem;font-style:normal;font-variation-settings:\"wdth\" 100}.item-id{display:none}@media (max-width: 370px){#main-nav{gap:30px}}.nativeContainer{--native-padding: 30px;padding-top:var(--native-padding)!important;--app-container-height: calc(100dvh - var(--native-padding) + 30px - var(--nav-height)) !important}.nativeApp{padding-bottom:30px}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0}#home-container{display:grid;grid-template-columns:1fr;grid-template-rows:auto 1fr;width:100%;overflow-y:auto;height:var(--app-container-height);background-color:var(--background-color);scrollbar-width:none}#greeting-container{display:flex;flex-direction:column;justify-content:flex-start;flex-shrink:0;gap:5px;color:var(--h1-color)}#greeting-text{display:flex;flex-direction:column;justify-content:flex-start}.tag{width:15%;min-width:60px;max-width:60px;height:15%;min-height:20px;border-radius:15px;display:flex;align-items:center;justify-content:center;gap:2px}.tag-text{font-family:var(--font);font-size:1rem;color:var(--accent-color)}.tag-logo{width:12px;height:12px;margin-bottom:2px}#admin-panel{border-top:1px solid var(--border-color);border-bottom:1px solid var(--border-color);padding:0 27px;grid-row:2;width:100%;margin-top:10px;display:flex;justify-content:space-evenly;align-items:center;height:55px}#admin-container{padding:0 27px;display:flex;flex-direction:column}.tab{font-size:1.5rem;font-weight:medium;color:var(--main-text-color);border:none;background-color:transparent;width:90px;height:30px;transition:background-color .3s ease}.tab:hover,.checkbox:hover{cursor:pointer}.tab.active{color:var(--background-color);background-color:var(--accent-color)}.progress-wrapper{display:flex;justify-content:center;align-items:center;place-self:center;position:relative;width:140px;min-height:170px}.progress-svg{width:140px;height:140px;transform:rotate(-90deg)}.progress-circle-background{fill:none;stroke:var(--progress-circle-color);stroke-width:var(--circle-stroke)}.progress-bar{--progress-in-percent: 0;fill:none;stroke:var(--accent-color);stroke-width:var(--circle-stroke);stroke-linecap:round;stroke-dasharray:565.48;stroke-dashoffset:calc(565.48 - (565.48 * var(--progress-in-percent)) / 100);transition:stroke-dashoffset .5s ease-out}.progress-text{position:absolute;top:50%;left:50%;text-align:center;transform:translate(-50%,-50%);color:var(--accent-color);font-size:2.8rem;font-weight:700;font-family:figtree,sans-serif}#next-meals{display:flex;flex-direction:column}#next-meal-text{font-size:3.2rem;font-family:figtree,sans-serif;font-weight:600;margin-bottom:10px;color:var(--h1-color)}.meals-info-db{display:flex;flex-direction:column;justify-content:flex-start;gap:22px;overflow-y:visible}.next-meal-card-db{padding:10px 15px;display:flex;flex-direction:column;height:fit-content;gap:8px}.congratulations-message-db{padding:10px 15px;height:fit-content;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:1.6rem;font-weight:500;color:#6b7280;gap:5px}#congrats-link{border:none;background-color:transparent;font-size:1.4rem;font-weight:500;color:var(--accent-color);border-bottom:1px solid var(--accent-color);border-radius:0}.first-row-db{display:flex;gap:10px}.nutrition-values-db{display:flex;justify-content:space-around}.checkbox{-webkit-appearance:none;appearance:none;width:20px;height:20px;border:1px solid var(--border-color)!important;border-radius:50%;cursor:pointer;transition:all .2s ease;position:relative;flex-shrink:0;margin:0}.checkbox:checked{background:var(--positive-color)}.checkbox:checked:after{content:\"✓\";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--background-color);font-size:1.2rem;font-weight:700}.next-meal-info{display:flex;justify-content:flex-start;width:100%;gap:15px}.next-meal-info-texts{display:flex;flex-direction:column;justify-content:center;gap:0px;flex:1}.meal-name-db{font-size:1.6rem;font-weight:600;color:var(--main-text-color)}.nutrition-item-db{display:flex;flex-direction:column;justify-content:center}.nutrition-value-db{font-size:1.5rem;font-weight:600;display:flex;justify-content:center;color:var(--main-text-color)}.nutrition-values-db{display:flex;justify-content:space-between;align-items:center;gap:20px;padding:5px 40px 10px}.nutrition-label-db{font-size:1.2rem;display:flex;justify-content:center}.subtext{font-size:1.4rem;margin:0}.calories-db{font-size:1.6rem;color:var(--main-text-color)}.nutrition-text-db{font-size:1.2rem}#meals-info-db::-webkit-scrollbar{display:none}#info-stats-db{display:flex;justify-content:center;gap:34px;height:100%}#planned{padding:15px;width:100%;height:80px;display:flex;flex-direction:column;align-items:flex-start}.nowrap-text{white-space:nowrap}.meals-amount-db{font-family:figtree,sans-serif;font-weight:600}#eaten{padding:15px;width:100%;height:80px;display:flex;flex-direction:column;align-items:flex-start}#todays-meals-text{font-size:2rem;font-family:figtree,sans-serif;font-weight:600;position:sticky;top:0;margin-bottom:5px;background-color:var(--background-color);color:var(--h1-color)}#todays-meals-container{width:100%;display:flex;flex-direction:column;gap:15px;height:fit-content;flex-shrink:0}.mealcards-db{padding:8px 15px;display:flex;justify-content:flex-start;align-items:center;width:100%;height:85%;margin-bottom:10px;margin-top:-15px;gap:15px}.check-point-db{min-width:10px;min-height:10px;border-radius:50%;background-color:var(--border-color)}.check-point-db.active{background-color:var(--accent-color)}.todays-calories{margin-left:auto;white-space:nowrap;font-weight:400}#standard-container{margin-top:5px;display:flex;flex-direction:column;overflow-y:auto;height:fit-content}#user-managment-container{display:grid;grid-template-rows:auto 1fr;overflow-y:auto;margin-top:20px}#user-info{display:flex;flex-direction:column}#user-text{font-family:figtree,sans-serif;margin-bottom:2px}#user-amount{display:flex;align-items:center;gap:5px;margin-left:2px;margin-bottom:8px}#user-red-point{width:5px;height:5px;border-radius:50%;background-color:var(--accent-color)}.meals-amount-text{font-size:1.4rem;color:var(--main-text-color)}#search-icon-db{width:15px;height:15px;margin:-2px;display:flex;align-items:center}#search-bar-db{display:flex;justify-content:flex-start;align-items:center;gap:5px;border-radius:6px;border:1px solid var(--border-color);width:100%;height:30%;padding:8px 12px}#search-bar-db input{display:flex;flex-direction:column;justify-content:center;align-items:center;border:none;outline:none;flex:1;background:transparent;line-height:1}#search-bar-db input::placeholder{color:var(--light-text-color);font-size:1.4rem;font-weight:300;font-family:poppins,sans-serif}#user-list{display:flex;flex-direction:column;gap:10px;overflow-y:auto;list-style-type:none;scrollbar-width:none;-ms-overflow-style:none;margin-top:5px}#my-element::-webkit-scrollbar{display:none}.card.user{position:relative;overflow:hidden;background-color:var(--card-color);box-shadow:none;border:1px solid var(--border-color);border-radius:6px;min-height:60px}.card.user .swipe-content{display:flex;align-items:center;background-color:var(--card-color);min-height:55px;gap:10px;padding:0px 1rem 0px 0px;position:relative;z-index:0;cursor:pointer;transition:transform .3s ease-out,border-radius .3s ease-out}.card.user .swipe-delete{position:absolute;top:0;right:0;width:0px;height:100%;color:var(--background-color);display:flex;justify-content:center;align-items:center;font-weight:600;font-size:1.2rem;z-index:1;cursor:pointer;background-color:#e35252;opacity:0;transition:width .3s ease-out,opacity .3s ease-out;overflow:hidden}.card.user.deleting{transition:opacity .3s ease-out,max-height .3s ease-out,padding .3s ease-out,margin .3s ease-out;opacity:0;max-height:0!important;padding-top:0;padding-bottom:0;margin-bottom:-10px;border:none}.card.user.swipe-removing{transform:translate(-100%);opacity:0}.card.user:last-child{margin-bottom:10px}.profile-picture{display:flex;justify-content:center;align-items:center;margin-left:1rem;border-radius:60%;background-color:var(--fill-color);height:3.5rem;min-width:3.5rem;color:var(--main-text-color)}.user-name{font-size:1.2rem;color:var(--main-text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-email{font-size:1rem;color:#6b7280;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-data{display:flex;flex-direction:column;justify-content:center;flex:1;min-width:0}#user-role{display:flex;justify-content:center;align-items:center;min-width:fit-content;gap:10px}.user-tag{width:6rem;height:2rem;min-width:5rem;border-radius:15px;display:flex;align-items:center;justify-content:center;gap:2px}.user-tag-logo{width:1rem;height:1rem;margin-bottom:2px}.user-tag-text{font-size:1rem;color:var(--accent-color)}#card-um1{border:solid 1px var(--positive-border-color);background-color:var(--positive-fill-color)}#text-um1{color:var(--positive-color)}#card-um2{border:solid 1px var(--border-color-cook);background-color:var(--background-color-cook)}#text-um2{color:#7f8dff}#card-um3{border:solid 1px var(--border-color-admin);background-color:var(--background-color-admin)}#text-um3{color:var(--accent-color)}#change-role{width:12px;height:12px;background-color:var(--h1-color);mask:url(\"data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.8333%206.99996C12.8333%2010.22%2010.22%2012.8333%206.99996%2012.8333C3.77996%2012.8333%201.81413%209.58996%201.81413%209.58996M1.81413%209.58996H4.45079M1.81413%209.58996V12.5066M1.16663%206.99996C1.16663%203.77996%203.75663%201.16663%206.99996%201.16663C10.8908%201.16663%2012.8333%204.40996%2012.8333%204.40996M12.8333%204.40996V1.49329M12.8333%204.40996H10.2433'%20stroke='%231F2937'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e\") no-repeat center;-webkit-mask-size:contain;mask-size:contain}.hidden-admin-panel{display:none!important}#home-header{display:flex;justify-content:space-between;padding:27px 27px 0}#list-container *,#new-item-container *{min-width:0;font-family:inherit}#list-container{display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto auto 1fr;height:var(--app-container-height);width:100%;overflow-y:auto;padding:0 27px;gap:16px;background-color:var(--background-color);scrollbar-width:none}#list-description{display:flex;flex-direction:column;gap:6px}#list-header{display:flex;height:100%;justify-content:space-between;gap:6px;padding-top:27px;margin-bottom:0}#list-header h1{font-size:2.4rem;font-weight:500}#search-bar-gl input{width:100%;padding:6px 14px;border:1px solid var(--border-color);border-radius:12px;font-size:1.6rem;color:var(--main-text-color);background-color:var(--background-color)}#search-bar-gl input:focus{outline:none}#search-bar-gl input::placeholder{color:var(--light-text-color)}#filter-bar{display:flex;justify-content:start;align-items:center;gap:20px;scrollbar-width:none;overflow-x:auto;min-height:40px}.filterBtn{display:flex;align-items:center;justify-content:center;font-weight:600;color:#6b7280;border-radius:35px;background-color:var(--fill-color);border:1px solid transparent;min-height:40px;width:70px;flex-shrink:0;font-size:1.6rem}.filterBtn:hover{cursor:pointer}.filterBtn.active{background-color:var(--accent-color);color:var(--background-color)}.filterBtn.notActive{color:#6b7280;font-weight:300}#add-item-btn{display:flex;align-items:center;justify-content:center;background-color:var(--accent-color);color:var(--background-color);border:none;border-radius:11px;padding:14px;font-size:2rem;font-weight:600;width:100%;max-height:46px;gap:10px}.addingContainer{background-color:transparent!important}#add-item-gl{width:18px;height:18px;background-color:var(--background-color);mask:url(\"data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cline%20x1='9.01373'%20y1='4.37114e-08'%20x2='9.01373'%20y2='18'%20stroke='white'%20stroke-width='2'/%3e%3cpath%20d='M0.382294%209H17.553'%20stroke='white'%20stroke-width='2'/%3e%3c/svg%3e\") no-repeat center;-webkit-mask-size:contain;mask-size:contain}#add-item-btn img{width:18px;height:18px;margin-right:8px}#add-item-btn div{display:flex;align-items:center;justify-content:end;margin-bottom:-2px}#add-item-btn:hover{cursor:pointer}.grocery-list{list-style:none;padding:0;display:flex;flex-direction:column;gap:12px}.grocery-list:last-child{margin-bottom:10px}.grocery-item{background-color:var(--card-color);border-radius:var(--border-radius-big-card);box-shadow:none;position:relative;overflow:hidden;transition:none;border:1px solid var(--border-color)}.item-details{flex:1;display:flex;flex-direction:column;margin-left:10px}.category{font-size:1.4rem}.quantity-control{display:flex;align-items:center;justify-content:space-between;width:150px;gap:10px;touch-action:pan-y}.amount{font-size:1.6rem;color:var(--main-text-color);margin-right:-8px}.unit{font-size:1.2rem;color:var(--icon-grey-color);color:var(--main-text-color);font-weight:400}.quantity-control button{border:none;border-radius:50%;width:30px;height:30px;font-size:1.6rem;cursor:pointer}.minus-btn{display:flex;align-items:center;justify-content:center;margin-left:10px;background-color:var(--fill-color)}.minus-btn:hover{cursor:pointer}.minus-btn svg{width:13px;height:13px;mask:url(\"data:image/svg+xml,%3csvg%20width='13'%20height='2'%20viewBox='0%200%2013%202'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cline%20y1='1'%20x2='13'%20y2='1'%20stroke='%236B7280'%20stroke-width='2'/%3e%3c/svg%3e\") no-repeat center;-webkit-mask-size:contain;mask-size:contain;background-color:#6b7280}.plus-btn{display:flex;align-items:center;justify-content:center;background-color:var(--accent-color)}.plus-btn:hover{cursor:pointer}.plus-btn svg{width:13px;height:13px;mask:url(\"data:image/svg+xml,%3csvg%20width='13'%20height='13'%20viewBox='0%200%2013%2013'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cline%20x1='6.5'%20y1='2.18557e-08'%20x2='6.5'%20y2='13'%20stroke='white'/%3e%3cline%20y1='6.5'%20x2='13'%20y2='6.5'%20stroke='white'/%3e%3c/svg%3e\") no-repeat center;-webkit-mask-size:contain;mask-size:contain;background-color:var(--background-color)}#newItem{display:flex;flex-direction:column;gap:10px;border:none;outline:none;box-shadow:none;border-radius:0;overflow:visible}#newItem input{width:100%;padding:9px 14px;border-radius:11px;font-size:1.4rem;background-color:var(--background-color);color:var(--main-text-color);border:1px solid var(--border-color);outline:none}#new-item-container{display:flex;flex-direction:row;gap:10px;width:100%}.item-details-add{display:flex;flex-direction:column;gap:10px}.item-details-add{display:flex;flex-direction:column;gap:10px;width:100%;max-width:60%}.quantity-control-add{display:flex;flex-direction:column;align-items:start;justify-content:start;gap:10px;width:100%;max-width:60%}.buttons-container{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%;gap:10px}.buttons-container .save-btn{background-color:var(--accent-color);color:var(--background-color);border:none;border-radius:11px;padding:8px 16px;font-size:1.6rem;font-weight:400;cursor:pointer;width:50%;max-width:50%}.buttons-container .cancel-btn{background-color:var(--background-color);color:var(--main-text-color);border:1px solid var(--border-color);border-radius:11px;padding:8px 16px;font-size:1.6rem;font-weight:400;cursor:pointer;width:50%;max-width:50%}.checkbox-gl{top:-10px}.grocery-item .swipe-content{background-color:var(--card-color);padding:12px 16px;display:flex;align-items:center;justify-content:space-between;position:relative;z-index:0;cursor:pointer;border-radius:15px;transition:transform .3s ease-out,border-radius .3s ease-out}.grocery-item .swipe-delete{position:absolute;top:0;right:0;width:0px;height:100%;color:var(--background-color);display:flex;justify-content:center;align-items:center;font-weight:600;font-size:1.6rem;z-index:1;cursor:pointer;background-color:#e35252;border-radius:0;opacity:0;transition:width .3s ease-out,opacity .3s ease-out;overflow:hidden}.grocery-item .swipe-delete:before{content:\"\";position:absolute;top:0;right:0;bottom:0;left:15px;background-color:#e35252;border-radius:0 15px 15px 0;z-index:-1}.grocery-item.deleting{transition:opacity .3s ease-out,max-height .3s ease-out,padding .3s ease-out,margin .3s ease-out;opacity:0;max-height:0!important;padding-top:0;padding-bottom:0;margin-bottom:-12px;border:none}.grocery-item.swipe-removing{transform:translate(-100%);opacity:0}.grocery-list.swipe-bg{background-color:red}@media (max-width: 442px){.quantity-control{width:140px}}@media (max-width: 426px){.quantity-control{width:138px}}@media (max-width: 382px){.quantity-control{width:135px}}@media (max-width: 362px){.quantity-control{width:133px}}@media (max-width: 350px){.quantity-control{width:130px;justify-content:space-between;transform:translate(4%)}.amount{margin-right:-6px}}@media (max-width: 337px){.quantity-control{width:128px}}.grocery-item:has(input[type=checkbox]:checked) .subtext,.grocery-item:has(input[type=checkbox]:checked) h3{text-decoration:line-through;color:#6b7280;text-decoration-color:#000}.grocery-item:has(input[type=checkbox]:checked) .swipe-content{filter:sepia(1) hue-rotate(90deg) brightness(.9) saturate(1.2)}.custom-select.unit-gl{width:100%}#meal-plan{display:grid;grid-template-columns:1fr;grid-template-rows:auto auto 1fr;width:100%;height:var(--app-container-height);overflow-y:hidden;padding:0 27px;background-color:var(--background-color)}#plan-description{display:flex;flex-direction:column;gap:6px;margin-bottom:20px}#plan-description h1{font-size:2.4rem;font-weight:500}#plan-header{display:flex;justify-content:space-between;padding-top:27px}.subtext{font-size:1.4rem}.calendar-container{border-radius:12px;border:1px solid var(--border-color);padding:15px 15px 10px;width:100%;height:135px}.calendar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;height:30%}.month-year{color:#6b7280;font-size:14px;font-weight:400}.generate-btn{background:var(--accent-color);color:var(--background-color);border:none;display:flex;align-items:center;justify-content:center;height:90%;width:30%;padding:4px 12px;border-radius:15px;font-size:1.4rem;cursor:pointer;font-weight:500;margin-right:6px}.generate-btn:hover{cursor:pointer}.days-header{display:grid;grid-template-columns:repeat(7,1fr);gap:5px;margin-bottom:8px;place-items:center}.day-label{text-align:center;font-size:1.4rem;color:#6b7280;font-weight:400;padding:2px 0;width:28px}.days-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:5px;place-items:center}.day{width:28px;height:28px;display:flex;align-items:center;justify-content:center;border-radius:50%;font-size:1.4rem;cursor:pointer;color:var(--main-text-color);background:transparent}.day:hover{cursor:pointer}.other-month{color:#ccc}.day.selected{background:var(--accent-color);color:var(--background-color)}#content-section{display:flex;flex-direction:column;padding-top:15px;padding-bottom:15px;overflow-y:auto;gap:15px;scrollbar-width:none}#content-section::-webkit-scrollbar{display:none}.plan-meal-card{min-height:145px;height:fit-content;width:100%;padding:10px 20px;flex-shrink:0}.meal-header-mp{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px;gap:20px}.meal-title-mp{font-size:1.6rem;font-weight:500;color:var(--main-text-color)}.meal-calories-mp{font-size:1.6rem;font-weight:500;color:var(--main-text-color);white-space:nowrap}.nutrition-label-mp{font-size:1.2rem;display:flex;justify-content:center}.nutrition-value-mp{font-size:1.2rem;font-weight:500;display:flex;justify-content:center;color:var(--main-text-color)}.nutrition-values-mp{display:flex;justify-content:space-between;align-items:center;gap:20px;padding:5px 40px 10px}.nutrition-item-mp{display:flex;flex-direction:column;justify-content:center}.meal-details-mp{display:flex;justify-content:flex-start;align-items:center;gap:15px}.footer-mp{display:flex;justify-content:center;align-items:center;gap:4px}.clock-logo-mp{width:12px;height:12px;margin-top:-1px}.users-logo-mp{width:12px;height:12px}.footer-text-mp{color:#6b7280;font-weight:300;font-size:1.2rem}@media (max-width: 400px){.nutrition-values-mp{gap:0px}}@media (max-width: 370px){.nutrition-values-mp{padding:5px 20px 10px}.generate-btn{font-size:1.2rem}}@media (max-width: 340px){.generate-btn{font-size:1.1rem}}#view-dish-card{display:flex;flex-direction:column;position:fixed;top:10vh;left:50%;transform:translate(-50%);background-color:var(--background-color);border-radius:var(--border-radius-overlay);width:450px;max-width:90vw;height:calc(90dvh - var(--nav-height));overflow:hidden;color:var(--main-text-color);box-shadow:0 20px 40px rgba(0,0,0,.3);font-family:inherit;padding:0;scrollbar-width:none}#view-info-scrollable{padding:10px 20px 20px;overflow:auto;scrollbar-width:none}.view-dish-numbers{color:var(--main-text-color);font-weight:500}.view-macro-name{display:flex;flex-direction:column;justify-content:center}#view-clock{position:relative;top:10%;width:15px;height:15px;background-color:var(--main-text-color);mask:url(\"data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.5%205.5H6.5V3.5C6.5%203.36739%206.44732%203.24021%206.35356%203.14645C6.25979%203.05268%206.13261%203%206%203C5.86739%203%205.74022%203.05268%205.64645%203.14645C5.55268%203.24021%205.5%203.36739%205.5%203.5V6C5.5%206.13261%205.55268%206.25979%205.64645%206.35355C5.74022%206.44732%205.86739%206.5%206%206.5H7.5C7.63261%206.5%207.75979%206.44732%207.85356%206.35355C7.94732%206.25979%208%206.13261%208%206C8%205.86739%207.94732%205.74021%207.85356%205.64645C7.75979%205.55268%207.63261%205.5%207.5%205.5ZM6%201C5.0111%201%204.0444%201.29324%203.22215%201.84265C2.39991%202.39206%201.75904%203.17295%201.3806%204.08658C1.00217%205.00021%200.90315%206.00555%201.09608%206.97545C1.289%207.94536%201.76521%208.83627%202.46447%209.53553C3.16373%2010.2348%204.05465%2010.711%205.02455%2010.9039C5.99446%2011.0969%206.99979%2010.9978%207.91342%2010.6194C8.82705%2010.241%209.60794%209.6001%2010.1573%208.77785C10.7068%207.95561%2011%206.98891%2011%206C10.9985%204.67437%2010.4713%203.40346%209.53391%202.46609C8.59655%201.52873%207.32563%201.00147%206%201ZM6%2010C5.20888%2010%204.43552%209.7654%203.77772%209.32588C3.11992%208.88635%202.60723%208.26164%202.30448%207.53073C2.00173%206.79983%201.92252%205.99556%202.07686%205.21964C2.2312%204.44371%202.61216%203.73098%203.17158%203.17157C3.73099%202.61216%204.44372%202.2312%205.21964%202.07686C5.99557%201.92252%206.79983%202.00173%207.53074%202.30448C8.26164%202.60723%208.88635%203.11992%209.32588%203.77772C9.76541%204.43552%2010%205.20887%2010%206C9.99879%207.06049%209.57697%208.0772%208.82709%208.82709C8.07721%209.57697%207.0605%209.99879%206%2010Z'%20fill='%236B7280'/%3e%3c/svg%3e\") no-repeat center;-webkit-mask-size:contain;mask-size:contain;margin-right:5px}#view-dish-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color);padding:20px 20px 10px;box-shadow:0 2px 5px var(--section-shadow)}#view-dish-name{font-size:2.4rem;font-weight:500;color:var(--h1-color);margin-right:40px}#close-view-dish{position:absolute;top:15px;right:20px;border:none;background:transparent}#view-dish-info{padding:0 10px 20px 0;height:fit-content;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:15px;border-bottom:1px solid var(--border-color)}#view-dish-info-details{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:20px}#view-dish-info-header{font-size:1.6rem}#view-kcal-time,#view-dish-macros{margin-left:5px;display:flex;justify-content:center;gap:20px}#cooking-process{padding:20px 0;height:fit-content;display:flex;flex-direction:column;gap:10px;border-bottom:1px solid var(--border-color)}#cooking-process-header{display:flex;justify-content:space-between;align-items:center}#cooking-process-name{font-size:1.6rem;font-weight:500;color:var(--main-text-color)}#reset-cooking-process{padding:5px 15px;background:var(--accent-color);border:none;color:var(--background-color);font-size:1.2rem;cursor:pointer}#cooking-progress-bar{width:100%;height:8px;background-color:var(--progress-circle-color);border-radius:5px;margin-top:5px}#cooking-progress-fill{width:0%;height:8px;background:var(--accent-color);border-radius:5px;transition:width .3s ease}#view-completed-steps{display:flex;justify-content:space-between;align-items:center;font-size:1.2rem}#view-dish-ingredients{padding:20px 0;height:fit-content;display:flex;flex-direction:column;gap:15px;border-bottom:1px solid var(--border-color)}#view-dish-ingredients-text{font-size:1.6rem;font-weight:500;color:var(--main-text-color)}#view-dish-ingredients-list{display:flex;flex-direction:column;gap:10px;list-style:none;padding:0;margin:0}.view-dish-ingredient-el{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;background-color:var(--fill-color);width:100%;height:28px;border-radius:var(--border-radius)}.view-dish-ingredient-name{font-size:1.2rem;font-weight:500;color:var(--main-text-color)}.view-dish-ingredient-amount{font-size:1.1rem}#view-dish-instructions{display:flex;flex-direction:column;gap:15px;padding:20px 0;height:fit-content}#view-dish-instructions-text{font-size:1.6rem;font-weight:500;color:var(--main-text-color)}#view-dish-instructions-list{display:flex;flex-direction:column;gap:10px;list-style:none;padding:0 10px;margin:0;background-color:var(--background-color)}.view-instruction-step-el{padding:10px;height:fit-content;border-radius:var(--border-radius);display:flex;justify-content:flex-start;align-items:flex-start;gap:10px;border:var(--border-color) 1px solid;transition:border .3s ease}.checkbox-overlay{-webkit-appearance:none;appearance:none;width:15px;height:15px;border:1px solid var(--border-color);border-radius:var(--border-radius-checkbox);cursor:pointer;transition:all .2s ease;position:relative;flex-shrink:0;margin:0}.checkbox-overlay:checked{background-color:var(--positive-color);border:1px solid var(--positive-color)}.checkbox-overlay:checked:after{content:\"✓\";position:absolute;top:48%;left:50%;transform:translate(-50%,-50%);color:var(--background-color);font-size:1rem;font-weight:700}.view-instruction-step-el:has(input[type=checkbox]:checked){background-color:var(--positive-fill-color);border:1px solid var(--positive-color)}.view-instruction-step-el:has(input[type=checkbox]:checked) .view-instruction-header,.view-instruction-step-el:has(input[type=checkbox]:checked) .view-instruction-text{text-decoration:line-through;color:#6b7280;text-decoration-color:#000}.view-instruction-text-container{display:flex;flex-direction:column;gap:5px;font-size:1.2rem;font-weight:400}.view-instruction-header{color:var(--main-text-color)}.view-instruction-text{color:#6b7280}.meals-container *{min-width:0;font-family:inherit}.meals-container{display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto auto 1fr;height:var(--app-container-height);width:100%;overflow-y:hidden;padding:0 27px;gap:16px;background-color:var(--background-color)}#meals-header{display:flex;justify-content:space-between;padding-top:27px}#meals-description{display:flex;flex-direction:column;gap:6px}#meals-description h1{font-size:2.4rem;font-weight:500}.filterBtn-p{display:flex;align-items:center;justify-content:center;font-weight:600;color:#6b7280;border-radius:35px;background-color:var(--fill-color);border:1px solid transparent;min-height:40px;width:70px;flex-shrink:0;font-size:1.6rem}.filterBtn-p:hover{cursor:pointer}.filterBtn-p.long-text{padding:0 53px;width:100px}#search-bar-p input{width:100%;padding:6px 14px;border:1px solid var(--border-color);border-radius:12px;font-size:1.6rem;color:var(--main-text-color);background-color:var(--background-color)}#search-bar-p input:focus{outline:none}#search-bar-p input::placeholder{font-size:1.6rem;color:var(--light-text-color)}#filter-bar-p{display:flex;justify-content:start;align-items:center;gap:20px;scrollbar-width:none;-ms-overflow-style:none;overflow-x:auto;min-height:40px}#filter-bar-p::-webkit-scrollbar{display:none}.filterBtn-p.active-p{background-color:var(--accent-color);color:var(--background-color)}.filterBtn-p.notActive-p{color:#6b7280;font-weight:300}#summary-p{display:flex;justify-content:center;align-items:center;height:100%;gap:25px}#preferred{display:flex;flex-direction:column;justify-content:flex-start;border:1px solid var(--positive-border-color);border-radius:15px;background-color:var(--positive-fill-color);color:var(--positive-color);min-height:65px;width:50%;padding:10px 12px;font-size:1.2rem}#blocked{display:flex;flex-direction:column;justify-content:flex-start;border:1px solid var(--blocking-border-color);border-radius:15px;background-color:var(--blocking-fill-color);color:var(--blocking-color);min-height:65px;width:50%;padding:10px 12px;font-size:1.2rem}.subtext-boxes-p span{white-space:nowrap}.header-boxes-p{display:flex;align-items:center;gap:15px}.header-preferred-p{font-size:1.6rem;font-weight:500;color:var(--positive-text-header)}#green-point-p{border-radius:50%;background-color:var(--positive-color);width:11px;height:11px;flex-shrink:0}#red-point-p{border-radius:50%;background-color:var(--blocking-color);width:11px;height:11px;flex-shrink:0}.header-blocked-p{font-size:1.6rem;font-weight:500;color:var(--negative-text-header)}.subtext-boxes-p{display:flex;gap:10px}#food-p{overflow-y:auto;scrollbar-width:none;display:flex;flex-direction:column;gap:10px}.food-separation{display:flex;flex-direction:column;justify-content:center;gap:10px}.headerblock-p{display:flex;align-items:center;gap:10px;position:sticky;top:0;z-index:1;background-color:var(--background-color)}#plus-preferences{display:flex;align-items:center;justify-content:center;width:12px;height:12px;background-color:var(--background-color);mask:url(\"data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7%200L7%2014'%20stroke='white'%20stroke-width='2'/%3e%3cpath%20d='M0%207H14'%20stroke='white'%20stroke-width='2'/%3e%3c/svg%3e\") no-repeat center;-webkit-mask-size:contain;mask-size:contain}.header-list-p{font-size:2rem;color:var(--h1-color);font-weight:500}.add-item-p{border:none;border-radius:50%;background-color:var(--accent-color);min-height:22px;min-width:22px;display:none;align-items:center;justify-content:center}.add-item-p:hover{cursor:pointer}#dishes-list-p,#ingredients-list-p{list-style-type:none}.dish-card-p{background-color:var(--card-color);border-radius:var(--border-radius-big-card);box-shadow:none;position:relative;overflow:hidden;margin-bottom:20px;border:1px solid var(--border-color)}.first-row-of-dish{display:flex;justify-content:space-between;align-items:flex-start;width:100%;gap:16px}.descr-p{display:flex;flex-direction:column;justify-content:flex-start;gap:2px;min-width:0}.title-p{font-size:1.6rem;font-weight:500;color:var(--main-text-color)}.dish-info-p{display:flex;align-items:center;gap:7px}.subtext-point{width:3px;height:3px;border-radius:50%;background-color:#6b7280}.preference-buttons{display:flex;align-items:center;gap:12px;flex-shrink:0}.like{border:none;border-radius:50%;min-height:30px;min-width:30px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;background-color:var(--fill-color)}.like:hover{cursor:pointer}.like.favorited{background-color:var(--positive-color)}.dislike{border:none;border-radius:50%;min-height:30px;min-width:30px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;background-color:var(--fill-color)}.dislike:hover{cursor:pointer}.dislike.rejected{background-color:var(--blocking-color)}.star-icon{width:18px;height:18px;background-color:#999;mask:url(\"data:image/svg+xml,%3csvg%20width='25'%20height='25'%20viewBox='0%200%2025%2025'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.0219%205.59679C11.2466%204.54095%2012.7534%204.54095%2012.9781%205.59679L13.6231%208.62792C13.7296%209.12837%2014.1966%209.46772%2014.7055%209.41434L17.7876%209.09107C18.8612%208.97846%2019.3268%2010.4116%2018.3921%2010.9515L15.7086%2012.5016C15.2655%2012.7575%2015.0871%2013.3066%2015.2951%2013.7741L16.555%2016.6054C16.9939%2017.5916%2015.7748%2018.4774%2014.9724%2017.7552L12.669%2015.6821C12.2887%2015.3398%2011.7113%2015.3398%2011.331%2015.6821L9.02759%2017.7552C8.22523%2018.4774%207.00613%2017.5916%207.44498%2016.6054L8.70485%2013.7741C8.91286%2013.3066%208.73446%2012.7575%208.2914%2012.5016L5.60793%2010.9515C4.67319%2010.4116%205.13884%208.97846%206.21243%209.09107L9.29451%209.41434C9.80338%209.46772%2010.2704%209.12837%2010.3769%208.62792L11.0219%205.59679Z'%20fill='%23999999'/%3e%3c/svg%3e\") no-repeat center;-webkit-mask-size:contain;mask-size:contain;transition:background-color .3s ease}.like.favorited .star-icon{background-color:var(--background-color)}.dislike .cross-icon{width:14px;height:14px;stroke:#999;transition:stroke .3s ease}.dislike.rejected .cross-icon{stroke:var(--background-color)}.tags-container-p{display:flex;align-items:center;gap:15px}.tag-p{font-size:1.2rem;color:#6b7280;font-weight:400;padding:5px 10px;border:none;width:fit-content;height:fit-content;border-radius:20px;background-color:var(--fill-color)}.ingredient-card-p{background-color:var(--card-color);border-radius:var(--border-radius-big-card);box-shadow:none;position:relative;overflow:hidden;margin-bottom:10px;border:1px solid var(--border-color)}@media (max-width: 400px){#blocked,#preferred{font-size:1.1rem}}@media (max-width: 360px){#blocked,#preferred{font-size:1rem}}.overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.8);z-index:1000;height:calc(100dvh - var(--nav-height))}.add-meal-card{display:flex;flex-direction:column;position:fixed;top:5vh;left:50%;transform:translate(-50%);background-color:var(--background-color);border-radius:var(--border-radius-overlay);width:450px;max-width:90vw;height:calc(90dvh - var(--nav-height));overflow:hidden;color:var(--main-text-color);box-shadow:0 20px 40px rgba(0,0,0,.3);font-family:inherit}.add-ingredient-card{display:flex;flex-direction:column;position:fixed;top:10vh;left:50%;transform:translate(-50%);background-color:var(--background-color);border-radius:10px;width:400px;max-width:90vw;height:calc(80dvh - var(--nav-height));max-height:622px;overflow:hidden;color:var(--main-text-color);box-shadow:0 20px 40px rgba(0,0,0,.3);font-family:inherit}.card-header-p{padding:25px 30px 20px;border-bottom:1px solid var(--border-color);box-shadow:0 2px 5px var(--section-shadow);position:relative}.close-btn{position:absolute;top:20px;right:20px;background:none;border:none;font-size:24px;color:#999;cursor:pointer;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.close-btn:hover{background-color:#f5f5f5;color:#333}.card-title-o-p{font-size:2rem;font-weight:500;color:var(--h1-color);font-family:inherit}.form-section{padding:20px 30px 0;overflow-y:auto;scrollbar-width:none}.form-section-ingredient{padding:20px 30px 0;overflow-y:auto;scrollbar-width:none;flex:1;min-height:0;max-height:473px}.form-group{margin-bottom:20px}.form-group:last-child{margin-bottom:0}.form-group.tags{border-bottom:1px solid var(--border-color);padding-bottom:30px}.form-group.ingredients{padding-bottom:0}.form-group.instructions{border-bottom:1px solid var(--border-color);padding-bottom:30px}.form-label{display:block;font-size:1.6rem;font-weight:500;color:var(--main-text-color);margin-bottom:8px;font-family:inherit}.form-label.ingredient{margin-bottom:10px}.form-input{width:100%;padding:12px 10px;max-height:35px;border:1px solid var(--border-color);border-radius:var(--border-radius);font-size:1.4rem;font-family:inherit;color:var(--main-text-color);transition:border-color .2s ease;background:var(--background-color)}.form-input::placeholder{color:var(--light-text-color);font-weight:200}.form-input:focus{outline:none;border-color:none}.form-row{display:flex;gap:15px;margin-bottom:20px}.form-col{flex:1}.nutrition-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px}.nutrition-grid .form-group{min-width:0}.nutrition-grid .form-label{white-space:nowrap;font-size:1.4rem;font-weight:500;color:var(--main-text-color);margin-bottom:8px;font-family:inherit;overflow:hidden;text-overflow:ellipsis}.nutrition-grid .form-input{width:100%;min-width:0;padding:12px 8px;border:1px solid var(--border-color);border-radius:var(--border-radius);font-size:1.4rem;transition:border-color .2s ease;background:var(--background-color)}.tags-container{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:10px}.tag-o-p{background-color:var(--fill-color);color:#6b7280;padding:6px 12px;border-radius:20px;font-size:1.2rem;display:flex;align-items:center;gap:6px}.tag-remove{background:none;border:none;color:#6b7280;cursor:pointer;font-size:1.4rem;display:flex;align-items:center;justify-content:center;width:16px;height:16px;border-radius:50%;transition:all .2s ease}.add-tag-btn{background-color:var(--accent-color);color:#fff;border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:18px;transition:background-color .2s ease}.add-tag-btn:hover{background-color:var(--accent-color)}.section-header-p{display:flex;flex-direction:column;margin-bottom:15px}.form-input.search{width:100%;min-height:10px;padding:5px 10px;border:1px solid var(--border-color);border-radius:var(--border-radius);font-size:1.4rem;resize:vertical;font-family:inherit;background-color:var(--background-color)}#ingredientsContainer{display:flex;flex-direction:column;gap:15px;height:300px;overflow-y:auto;overflow-x:hidden}#ingredientsContainer:last-child{padding-bottom:15px}.card.ingredient{display:flex;justify-content:flex-start;align-items:center;gap:15px;padding:10px;width:100%;height:50px;border-radius:var(--border-radius);list-style-type:none}.custom-select.preferences{width:100%}.select-trigger.preferences{border-radius:var(--border-radius)}.ingredient-amount-p{display:flex;justify-content:center;align-items:center;margin-left:auto;gap:10px}.form-input.ingredient{height:30px;width:60px;padding:5px 10px;text-align:center;border:1px solid var(--border-color);border-radius:var(--border-radius);font-size:1.4rem;resize:vertical;font-family:inherit;background-color:var(--card-color);color:var(--main-text-color)}.form-input.ingredient:focus{outline:none}.form-input.ingredient::placeholder{color:var(--light-text-color);font-weight:200}.form-input.search{width:100%;min-height:10px;padding:5px 10px;border:1px solid var(--border-color);border-radius:var(--border-radius);font-size:1.4rem;resize:vertical;font-family:inherit;background-color:var(--background-color);color:var(--main-text-color)}.form-input.search:focus{outline:none}.form-input.search::placeholder{color:var(--light-text-color);font-weight:200}.amount-text-p{font-size:1.4rem;color:var(--main-text-color);min-width:40px;text-align:center}.ingredient-text-p{font-size:1.4rem;color:var(--main-text-color)}.instructions-area{width:100%;min-height:100px;padding:5px 10px;border:1px solid var(--border-color);border-radius:var(--border-radius);font-size:1.4rem;resize:vertical;font-family:inherit;background-color:var(--background-color);color:var(--main-text-color)}.instructions-area:focus{outline:none}.instructions-area::placeholder{color:var(--light-text-color);font-weight:200}.form-actions-p,.form-actions-ingredients{padding:20px 0;border-top:1px solid var(--border-color);box-shadow:0 -2px 5px var(--section-shadow);display:flex;justify-content:center;align-items:center;flex-shrink:0;height:76px}.add-button-p{height:35px;width:fit-content;min-width:100px;padding:0 10px;border-radius:20px;background-color:var(--accent-color);color:var(--background-color);border:none;display:flex;justify-content:center;align-items:center;font-size:1.6rem}.hidden{display:none}.instruction-item{margin-bottom:15px}.instruction-text{font-size:14px;line-height:1.4;color:var(--light-text-color);margin-bottom:5px}.dish-card-p .swipe-content{background-color:var(--card-color);padding:10px 15px;display:flex;flex-direction:column;align-items:flex-start;gap:10px;position:relative;z-index:0;cursor:pointer;border-radius:0;transition:transform .3s ease-out,border-radius .3s ease-out;box-shadow:0 1px 3px rgba(0,0,0,.08)}.ingredient-card-p .swipe-content{background-color:var(--card-color);padding:10px 15px;min-height:55px;display:flex;align-items:center;justify-content:space-between;position:relative;z-index:0;cursor:pointer;border-radius:0;transition:transform .3s ease-out,border-radius .3s ease-out;box-shadow:0 1px 3px rgba(0,0,0,.08)}.dish-card-p .swipe-delete,.ingredient-card-p .swipe-delete{position:absolute;top:0;right:0;width:0px;height:100%;color:var(--background-color);display:flex;justify-content:center;align-items:center;font-weight:600;font-size:1.6rem;z-index:1;cursor:pointer;background-color:#e35252;border-radius:0;opacity:0;transition:width .3s ease-out,opacity .3s ease-out;overflow:hidden}.ingredient-card-p .swipe-delete{font-size:1.4rem}.dish-card-p .swipe-delete:before,.ingredient-card-p .swipe-delete:before{content:\"\";position:absolute;top:0;right:0;bottom:0;left:15px;background-color:#e35252;border-radius:0;z-index:-1}.dish-card-p.deleting,.ingredient-card-p.deleting{transition:opacity .3s ease-out,max-height .3s ease-out,padding .3s ease-out,margin .3s ease-out;opacity:0;max-height:0!important;padding-top:0;padding-bottom:0;margin-bottom:0;border-radius:0;border:none}.swipe-disabled{pointer-events:none}.custom-select{position:relative;display:inline-block;margin:0}.select-trigger{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background-color:var(--background-color);border:1px solid var(--border-color);border-radius:10px;cursor:pointer;font-size:1.4rem;color:var(--main-text-color);transition:all .3s ease;user-select:none;min-height:20px}.select-text{font-size:1.4rem}.select-trigger:hover,.select-trigger.active{border-color:none;background-color:var(--background-color)}.select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid var(--main-text-color);transition:transform .3s ease;flex-shrink:0}.select-trigger.active .select-arrow{transform:rotate(180deg)}.select-dropdown{position:absolute;top:100%;left:0;right:0;background-color:var(--background-color);border:none;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,.15);z-index:9999;max-height:200px;overflow-y:auto;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s ease}.select-dropdown.active{opacity:1;visibility:visible;transform:translateY(0)}.select-option{padding:12px 16px;cursor:pointer;font-size:16px;color:var(--main-text-color);background-color:var(--background-color);transition:background-color .2s ease;border:none;width:100%;text-align:left}.select-option:hover{background-color:var(--accent-background);color:var(--main-text-color)}.select-option.selected{background-color:var(--accent-color);color:#fff}.select-option:first-child{border-top-left-radius:8px;border-top-right-radius:8px}.select-option:last-child{border-bottom-left-radius:8px;border-bottom-right-radius:8px}@media (max-width: 768px){.select-trigger,.select-option{padding:10px 12px;font-size:14px}}.settings-container *,.scrollable-content-st *{min-width:0;font-family:inherit}.settings-container{display:flex;flex-direction:column;align-items:center;justify-content:start;background-color:var(--background-color);height:100vh;width:100%;overflow-y:auto;padding-bottom:0;font-family:inherit}.settings-container a{text-decoration:none;color:var(--main-text-color)}.settings-container h1{font-size:1.8rem;font-weight:500}.settings-header{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;max-height:200px;width:100%;z-index:1000;padding:16px;background-color:var(--background-color);border-bottom:1px solid var(--border-color);box-shadow:0 2px 5px var(--section-shadow);position:relative;text-align:center}.settings-header h1{margin:0;font-size:2rem}.bigger-hitbox-st{display:flex;justify-content:center;align-items:center;position:relative;width:50px;height:50px;padding-right:20px}#arrow-back-st{width:10px;height:10px;border-left:3px solid var(--main-text-color);border-bottom:3px solid var(--main-text-color);border-radius:0 0 0 3px;transform:rotate(45deg);z-index:100}.bigger-hitbox-st:hover{cursor:pointer}#close-settings-btn{position:absolute;top:11px;right:20px;z-index:100}#close-settings-btn img{max-width:30px}.settings-hr{display:flex;justify-content:center;align-items:center;width:100%;max-height:1px}.settings-container hr{border:1px solid var(--border-color);width:100%;max-height:1px;position:absolute}#settings-item-1{display:flex;flex-direction:column;width:100%;gap:8px}.user-details-settings{display:flex;flex-direction:row;width:100%;gap:16px}.user-details-settings input{width:100%;height:3rem;border:1px solid var(--border-color);border-radius:7px;font-size:1.2rem;background-color:var(--background-color);color:var(--main-text-color);padding:7px}.user-details-settings input:focus{outline:none;border-color:var(--border-color)}.user-details-settings input::placeholder{color:#6b7280}.subtext-st{font-weight:500;font-size:1.2rem}.user-details-settings select{width:100%;height:3rem;border-radius:7px;font-size:1.2rem;background-color:var(--background-color);border:1px solid var(--border-color);outline:none;color:var(--main-text-color);padding-left:2px;font-family:inherit}.user-details-settings select option{font-size:1.6rem;border-radius:30px;width:50%}.user-details-settings select option:focus{outline:none;border-color:var(--border-color)}.left-column-settings,.right-column-settings{display:flex;flex-direction:column;gap:8px;margin-top:1%;width:50%}.input-container{display:flex;flex-direction:column;gap:4px}.selection-div-st{display:flex;flex-direction:column;align-items:start;justify-content:start;width:100%;height:100%;gap:20px}.al-card-st{width:100%;height:fit-content;max-height:100px;padding-bottom:5px}.al-text-st{position:relative;top:0;left:0;margin-top:4px;margin-left:7px;font-size:1rem;font-weight:400;font-size:1.4rem;color:var(--main-text-color)}.al-desc-st{position:relative;top:0;left:0;margin-top:2px;margin-left:7px;font-size:1rem;color:#868686;font-weight:500}.al-desc-st-2{font-size:1.2rem}.card-st-activity{border:transparent solid 1px;border-radius:10px;outline:var(--border-color) solid 1px;outline-offset:-1px;transition:border-color .7s ease,background-color .7s ease}.card-st-activity.clicked-st-activity{border:var(--positive-color) solid 1px;outline:none;background-color:var(--positive-fill-color)}.card-st-goal{border:transparent solid 1px;border-radius:10px;outline:var(--border-color) solid 1px;outline-offset:-1px;transition:border-color .7s ease,background-color .7s ease}.card-st-goal.clicked-st-goal{border:var(--positive-color) solid 1px;outline:none;background-color:var(--positive-fill-color)}@media (max-height: 700px){.al-card{width:60%;height:80%}.al-text{font-size:.8rem}.al-desc{font-size:.6rem}}#goal-container{display:flex;flex-direction:column}.goal-card-st *{margin:0;padding:0}.goal-card-st{height:50px;display:flex;flex-direction:column;align-items:start;justify-content:center;padding-left:10px;padding-bottom:0}.app-settings-row *{margin:0;padding:0}.app-settings-container{display:flex;flex-direction:column;align-items:start;justify-content:start;width:100%;gap:16px;margin-bottom:30px}.app-settings-container select{height:2.7rem;border:1px solid var(--border-color);border-radius:7px;font-size:1.2rem;background-color:var(--background-color);color:var(--main-text-color);width:8rem;padding-left:4px;font-family:inherit}.app-settings-container select:focus{outline:none;border-color:var(--border-color)}.app-settings-row{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%;padding:8px 0}.app-settings-buttons{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%;gap:16px;margin-top:-8px}#logout-btn{background-color:var(--accent-color);color:var(--background-color);border:none;font-weight:500;font-family:inherit;height:35px;border-radius:7px;font-size:1.35rem;width:100px}#logout-btn:hover{cursor:pointer}.scrollable-content-st{width:100%;padding:10px 20px;overflow-y:auto;height:calc(100dvh - 40px);display:flex;flex-direction:column;align-items:center;justify-content:start;gap:20px;scrollbar-width:none;-ms-overflow-style:none}.scrollable-content-st::-webkit-scrollbar{display:none}.input-wrapper{position:relative;display:inline-block;width:100%}.input-wrapper input{width:100%;padding-right:40px;box-sizing:border-box}.unit-label{position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#777;font-size:.9em;pointer-events:none}.select-field-sex-st{height:30px;border-radius:7px;padding:8px}.select-text.sex{font-size:1.2rem;font-weight:300}.select-option.sex-select{text-align:left;padding:8px;font-size:1.2rem;font-weight:300}.select-field-app-st{width:100px;height:35px;border-radius:10px;padding:4px 4px 4px 8px;display:flex;justify-content:space-between;align-items:center}.select-text.app-st{font-size:1.35rem;font-weight:300}.select-option.app{display:flex;flex-direction:column;justify-content:center;text-align:left;padding:4px 4px 4px 6px;font-size:1.4rem;font-weight:300;height:40px}\n/*$vite$:1*/",document.head.appendChild(n);const r="https://nutripilot.ddns.net:443/api";async function i(e){try{const t=await fetch(`${r}${e}`);if(!t.ok)throw new Error(`❌❌❌❌Fehler beim Abrufen von ${e}: ${t.statusText}`);const n=await t.json();return console.log("✅✅✅✅ ERFOLGREICH GELADEN!"+e),n}catch(t){return console.error(t),t?.message?.includes("503")||t?.message?.includes("Failed to fetch")||t?.message?.includes("Service Unavailable")?(await new Promise(e=>setTimeout(e,1e3)),console.log("❌❌❌❌ Retrying fetch for "+e+" due to 503... ❌❌❌❌"),await i(e)):null}}async function a(e,t){try{console.log(`[fetchDataWithToken] ➜ Endpoint: ${e}, Token:`,t);const n=await fetch(`${r}${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(console.log(`[fetchDataWithToken] ⇐ Status: ${n.status}`),403===n.status)throw console.log("403"),new Error("403");if(!n.ok)throw console.log("other error"),new Error(`${n.status}`);const o=await n.json();return console.log("[fetchDataWithToken] ✅ Erfolgreich geladen:",o),console.log("✅✅✅✅ ERFOLGREICH GELADEN!"+e),o}catch(n){return console.error(n),n?.message?.includes("503")||n?.message?.includes("Failed to fetch")||n?.message?.includes("Service Unavailable")?(await new Promise(e=>setTimeout(e,1e3)),console.log("❌❌❌❌ Retrying fetch for "+e+" due to 503... ❌❌❌❌"),await a(e,t)):null}}async function s(e,t,n){try{console.log(t);const o=await fetch(`${r}${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(t)});if(!o.ok)throw new Error(`Fehler beim Senden von ${e}: ${o.statusText}`);const i=await o.json();return console.log("✅✅✅✅ ERFOLGREICH GELADEN!"+e),i}catch(o){return console.error(o),o?.message?.includes("503")||o?.message?.includes("Failed to fetch")||o?.message?.includes("Service Unavailable")?(await new Promise(e=>setTimeout(e,1e3)),console.log("❌❌❌❌ Retrying fetch for "+e+" due to 503... ❌❌❌❌"),console.log(t),await s(e,t,n)):null}}function c(){const e=localStorage.getItem("token");if(!e)throw u(),new Error("Token nicht gefunden");return e}function l(){return function(e){try{const t=e.split(".")[1],n=atob(t);return JSON.parse(n)}catch(t){return null}}(c())}window.port=443;let d=!1;function u(){d||(d=!0,localStorage.removeItem("token"),localStorage.removeItem("userData"),alert("Your session has expired. You are being logged out."),window.location.href="./html-pages/unauthorized.html")}async function p(e){try{const t=l();t&&e.includes(t.role)||async function(){document.getElementsByTagName("body")[0].innerHTML="!! ACCESS DENIED !!",await new Promise(e=>setTimeout(e,1)),alert("No access to this page."),window.location.href="./html-pages/unauthorized.html"}()}catch(t){console.warn("Access denied because no token was found. Redirecting..."),window.location.href="./set-up/pages/getstarted.html"}}function g(e){const t=l();if(t)return t.role===e}async function m(){const e=localStorage.getItem("token");if(!e)return console.log("[checkSessionTokenValid] Kein Token gefunden"),u(),"expired";try{return await a("/check-token",e)?(console.log("[checkSessionTokenValid] ✅ Token gültig"),"valid"):(console.warn("[checkSessionTokenValid] ❌ Token abgelaufen – Nutzer wird ausgeloggt"),u(),"expired")}catch(t){return t.message.includes("403")?(console.warn("[checkSessionTokenValid] ❌ Token abgelaufen – Nutzer wird ausgeloggt"),u(),"expired"):(console.warn("[checkSessionTokenValid] ⚠️ Server nicht erreichbar – Tokenstatus unbekannt, Nutzer bleibt eingeloggt"),"unknown")}}async function h(e="all"){const t=c();return await s("/dishes_full_filtered",{category:e},t)}async function f(e,t){try{const n=await async function(e){const t=(await a("/users",c())).find(t=>t.email===e);if(!t)throw new Error("Benutzer nicht gefunden");return t.user_id}(t),o=c(),r={userId:n,role:e},i=await s("/set-role",r,o);return alert("Rolle erfolgreich geändert!"),i}catch(n){alert("Fehler beim Rollenwechsel: "+n.message)}}function x(e){s("/add-week-plan",{weekPlan:e,userId:l().id},c())}async function v(e){const t=c();if(!t||!e)throw new Error("Token or UserInfo is missing");await s("/save-user-data",e,t)}async function b(){const e=c();return await a("/get-user-data",e)}async function y(){const e=function(){try{const e=localStorage.getItem("userData");return e?JSON.parse(e):{}}catch(e){return console.error("Error reading user data:",e),{}}}();if(!(e.gender&&e.age&&e.weight&&e.height&&e.activityLevel&&e.goal))return void console.warn("No user data found in local storage. Skipping initial save.");console.warn("Saving initial user data to DB...");const t={gender:e.gender,age:e.age,weight_kg:e.weight?.kg,weight_pounds:e.weight?.pounds,height_cm:e.height?.cm,height_feet_and_inches:e.height?.feetAndInches,activityLevel:e.activityLevel,goal:e.goal};try{await v(t),localStorage.removeItem("userData")}catch(n){console.error("Failed to save initial user data to DB:",n)}}async function w(e){const t=c();if(console.log("Data being sent to save-next-meals:",e),!t||!e)throw new Error("Token or UserInfo is missing");await s("/save-next-meals",{next_meals:e},t)}async function k(e,t){const n=c();if(!n||!e||!t)throw new Error("Token, identifier or updatedItem is missing");await s("/update-user-list-item",{identifier:e,updatedItem:t},n)}async function E(e,t,n){const o=c();if(!(o&&t&&["like","dislike","neutral"].includes(n)&&["dish","ingredient"].includes(e)))throw new Error("Invalid input");await s("/set-user-preference",{type:e,id:t,preference:n},o)}async function L(){const e=c();if(!e)throw new Error("Token missing");return await a("/get-user-preferences",e)}function C(e,t,n){let o=!1,r=!1,i=0,a=0,s=0,c=null,l=null,d=null,u=!1;const p=()=>{u=!0,setTimeout(()=>{u=!1},500)},g=async e=>{e&&(e.style.maxHeight=`${e.offsetHeight}px`,requestAnimationFrame(()=>{e.classList.add("deleting")}),e.addEventListener("transitionend",async()=>{let t=e.querySelector(".item-id");if(e.remove(),t){let e=parseInt(t.textContent,10);e?await n(e):await n(t.textContent)}},{once:!0}))},m=n=>{if(u)return;const p=n.target.closest(t);var g;!p||n.target.closest("button")||n.target.closest("object")||n.target.classList.contains("swipe-delete")||(g=p,e.querySelectorAll(t).forEach(e=>{if(e!==g){const t=e.querySelector(".swipe-content"),n=e.querySelector(".swipe-delete");t&&(t.style.transform="translateX(0)",t.style.borderRadius="0px"),n&&(n.style.width="0px",n.style.opacity="0")}}),o=!0,r=!1,c=p,l=p.querySelector(".swipe-content"),d=p.querySelector(".swipe-delete"),i=n.type.includes("mouse")?n.pageX:n.touches[0].pageX,a=n.type.includes("mouse")?n.pageY:n.touches[0].pageY,s=i)},h=e=>{if(!o||!l)return;s=e.type.includes("mouse")?e.pageX:e.touches[0].pageX;const t=e.type.includes("mouse")?e.pageY:e.touches[0].pageY;let n=s-i,c=Math.abs(t-a);if(!r){if(c>30)return void(o=!1);if(!(n<-20))return;r=!0,d&&(d.style.width="0px",d.style.opacity="0",d.style.transition="none"),l&&(l.style.transition="none")}r&&n<=0&&(l.style.transform=`translateX(${n}px)`,(e=>{if(!d||!r)return;const t=Math.abs(e);t>0?(d.style.width=`${t}px`,d.style.opacity="1"):(d.style.width="0px",d.style.opacity="0")})(n))},f=()=>{if(!o||!l)return;if(o=!1,!r)return void(r=!1);let e=s-i;l.style.transition="transform 0.3s ease-out, border-radius 0.3s ease-out",d&&(d.style.transition="width 0.3s ease-out, opacity 0.3s ease-out"),e<-150?(p(),l.style.transform="translateX(-100%)",l.style.borderRadius="0 0 0 0",d&&(d.style.width="100%",d.style.opacity="1"),l.addEventListener("transitionend",()=>g(c),{once:!0})):e<-30?(l.style.transform="translateX(-90px)",l.style.borderRadius="0 0 0 0",d&&(d.style.width="90px",d.style.opacity="1")):(l.style.transform="translateX(0)",l.style.borderRadius="0px",d&&(d.style.width="0px",d.style.opacity="0")),r=!1};e.addEventListener("mousedown",m),document.addEventListener("mousemove",h),document.addEventListener("mouseup",f),e.addEventListener("touchstart",m,{passive:!0}),document.addEventListener("touchmove",h,{passive:!0}),document.addEventListener("touchend",f),e.addEventListener("click",e=>{if(!u&&e.target.classList.contains("swipe-delete")){const n=e.target.closest(t);p(),g(n)}}),document.addEventListener("click",n=>{const o=e.querySelectorAll(t);let r=n.target.closest(t);o.forEach(e=>{const t=e.querySelector(".swipe-content"),n=e.querySelector(".swipe-delete");t&&t.style.transform&&"translateX(0px)"!==t.style.transform&&""!==t.style.transform&&e!==r&&(t.style.transition="transform 0.3s ease-out, border-radius 0.3s ease-out",t.style.transform="translateX(0)",t.style.borderRadius="0px",n&&(n.style.transition="width 0.3s ease-out, opacity 0.3s ease-out",n.style.width="0px",n.style.opacity="0"))})})}class I{constructor(e,t=null){this.element=e,this.trigger=e.querySelector(".select-trigger"),this.dropdown=e.querySelector(".select-dropdown"),this.options=e.querySelectorAll(".select-option"),this.selectedText=e.querySelector(".select-text"),this.arrow=e.querySelector(".select-arrow"),this.isOpen=!1,this.selectedValue=null,this.onChangeCallback=t,this.init()}init(){this.trigger.addEventListener("click",e=>{e.stopPropagation(),this.toggle()}),this.options.forEach(e=>{e.addEventListener("click",t=>{console.log("Option clicked:",e.textContent),t.stopPropagation(),this.selectOption(e)})}),document.addEventListener("click",e=>{!this.element.contains(e.target)&&this.isOpen&&this.close()}),this.element.addEventListener("keydown",e=>{this.handleKeyPress(e)}),this.initializeDefault(),this.trigger.setAttribute("tabindex","0"),this.options.forEach(e=>{e.addEventListener("touchstart",t=>{e.classList.add("touching")}),e.addEventListener("touchend",t=>{e.classList.remove("touching")})})}initializeDefault(){const e=this.element.querySelector(".select-option.selected");if(e)return this.selectedText.textContent=e.textContent,void(this.selectedValue=e.dataset.value);const t=this.options[0];t&&this.selectOption(t)}toggle(){console.log("Toggle called, isOpen:",this.isOpen),this.isOpen?this.close():this.open()}open(){console.log("Opening dropdown");const e=this.selectedText.textContent.trim().toLowerCase();e&&this.options.forEach(t=>{t.textContent.trim().toLowerCase()===e?t.classList.contains("selected")||(t.classList.add("selected"),this.selectedValue=t.dataset.value):t.classList.remove("selected")}),this.isOpen=!0,this.trigger.classList.add("active"),this.dropdown.classList.add("active"),this.trigger.setAttribute("aria-expanded","true")}close(){console.log("Closing dropdown"),this.isOpen=!1,this.trigger.classList.remove("active"),this.dropdown.classList.remove("active"),this.trigger.setAttribute("aria-expanded","false")}selectOption(e){this.options.forEach(e=>e.classList.remove("selected")),e.classList.add("selected"),this.selectedText.textContent=e.textContent,this.selectedValue=e.dataset.value,this.close(),this.onChangeCallback&&this.onChangeCallback(this.selectedValue,e.textContent);const t=new CustomEvent("change",{detail:{value:this.selectedValue,text:e.textContent}});this.element.dispatchEvent(t)}handleKeyPress(e){switch(e.key){case"Enter":case" ":e.preventDefault(),this.isOpen||this.open();break;case"Escape":this.close();break;case"ArrowDown":e.preventDefault(),this.navigateOptions(1);break;case"ArrowUp":e.preventDefault(),this.navigateOptions(-1)}}navigateOptions(e){if(!this.isOpen)return void this.open();let t=Array.from(this.options).findIndex(e=>e.classList.contains("selected"))+e;t<0&&(t=this.options.length-1),t>=this.options.length&&(t=0),this.selectOption(this.options[t])}getValue(){return this.selectedValue}setValue(e){const t=Array.from(this.options).find(t=>t.dataset.value===e);t&&this.selectOption(t)}}function S(e,t){const n=document.getElementById(e);n&&t&&n.addEventListener("input",()=>{const e=n.value.toLowerCase();t.forEach(t=>{document.querySelectorAll(`${t} li`).forEach(t=>{t.style.display=t.textContent.toLowerCase().includes(e)?"":"none"})})})}const B=function(e,t,n){let o=Promise.resolve();function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var z;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(z||(z={}));class _ extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const j=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},o=n.Plugins=n.Plugins||{},r=()=>null!==t?t.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),i=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},a=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=r,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==r(),n.isPluginAvailable=e=>{const t=a.get(e);return!!(null==t?void 0:t.platforms.has(r()))||!!i(e)},n.registerPlugin=(e,s={})=>{const c=a.get(e);if(c)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),c.proxy;const l=r(),d=i(e);let u;const p=o=>{let r;const i=(...i)=>{const a=(async()=>(!u&&l in s?u=u="function"==typeof s[l]?await s[l]():s[l]:null!==t&&!u&&"web"in s&&(u=u="function"==typeof s.web?await s.web():s.web),u))().then(t=>{const a=((t,o)=>{var r,i;if(!d){if(t)return null===(i=t[o])||void 0===i?void 0:i.bind(t);throw new _(`"${e}" plugin is not implemented on ${l}`,z.Unimplemented)}{const i=null==d?void 0:d.methods.find(e=>o===e.name);if(i)return"promise"===i.rtype?t=>n.nativePromise(e,o.toString(),t):(t,r)=>n.nativeCallback(e,o.toString(),t,r);if(t)return null===(r=t[o])||void 0===r?void 0:r.bind(t)}})(t,o);if(a){const e=a(...i);return r=null==e?void 0:e.remove,e}throw new _(`"${e}.${o}()" is not implemented on ${l}`,z.Unimplemented)});return"addListener"===o&&(a.remove=async()=>r()),a};return i.toString=()=>`${o.toString()}() { [capacitor code] }`,Object.defineProperty(i,"name",{value:o,writable:!1,configurable:!1}),i},g=p("addListener"),m=p("removeListener"),h=(e,t)=>{const n=g({eventName:e},t),o=async()=>{const o=await n;m({eventName:e,callbackId:o},t)},r=new Promise(e=>n.then(()=>e({remove:o})));return r.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await o()},r},f=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?h:g;case"removeListener":return m;default:return p(t)}}});return o[e]=f,a.set(e,{name:e,proxy:f,platforms:new Set([...Object.keys(s),...d?[l]:[]])}),f},n.Exception=_,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},q=(e=>e.Capacitor=j(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),A=q.registerPlugin;class ${constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const o=this.windowListeners[e];return o&&!o.registered&&this.addWindowListener(o),n&&this.sendRetainedArgumentsForEvent(e),Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const o=this.listeners[e];if(o)o.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new q.Exception(e,z.Unimplemented)}unavailable(e="not available"){return new q.Exception(e,z.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const o=n.indexOf(t);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}e("W",$);const T=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),D=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class F extends ${async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,o]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=D(n).trim(),o=D(o).trim(),t[n]=o}),t}async setCookie(e){try{const t=T(e.key),n=T(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),i=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${o}; path=${r}; ${i};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}A("CapacitorCookies",{web:()=>new F});const M=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),o=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((n,o,r)=>(n[o]=e[t[r]],n),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(o.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,o]of Object.entries(e.data||{}))t.set(n,o);n.body=t.toString()}else if(o.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(o.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class N extends ${async request(e){const t=M(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce((e,n)=>{const[o,r]=n;let i,a;return Array.isArray(r)?(a="",r.forEach(e=>{i=t?encodeURIComponent(e):e,a+=`${o}=${i}&`}),a.slice(0,-1)):(i=t?encodeURIComponent(r):r,a=`${o}=${i}`),`${e}&${a}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),o=n?`${e.url}?${n}`:e.url,r=await fetch(o,t),i=r.headers.get("content-type")||"";let a,s,{responseType:c="text"}=r.ok?e:{};switch(i.includes("application/json")&&(c="json"),c){case"arraybuffer":case"blob":s=await r.blob(),a=await(async e=>new Promise((t,n)=>{const o=new FileReader;o.onload=()=>{const e=o.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},o.onerror=e=>n(e),o.readAsDataURL(e)}))(s);break;case"json":a=await r.json();break;default:a=await r.text()}const l={};return r.headers.forEach((e,t)=>{l[t]=e}),{data:a,headers:l,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}var O,P,H,U;A("CapacitorHttp",{web:()=>new N}),e("I",O),function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"}(O||e("I",O={})),e("N",P),function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"}(P||e("N",P={})),A("Haptics",{web:()=>B(()=>t.import("./web-legacy-B3Ibgk3e.js"),0,t.meta.url).then(e=>new e.HapticsWeb)}),function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(H||(H={})),function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"}(U||(U={}));const R=A("StatusBar"),V=q.isNativePlatform();async function W(){V?await R.setStyle({style:H.Light}):console.log("StatusBar: Set black font requested, but platform is not native.")}async function G(){V?await R.setStyle({style:H.Dark}):console.log("StatusBar: Set white font requested, but platform is not native.")}function Y(e){V&&e.classList.add("nativeContainer")}function K(){V&&document.getElementById("app").classList.add("nativeApp")}function X(e){return e.toString().replace(",",".")}function J(){const e=localStorage.getItem("theme")||"light";document.body.classList.toggle("dark-mode","dark"===e),"dark"===e?G():W()}function Z(){const e=document.querySelector(".settings");e&&e.addEventListener("click",function(){window.location.href="#settings"})}function Q(){const e=localStorage.getItem("lastValidHash")||Nt||"#home";window.location.href=e}function ee(){!function(){const e=document.getElementById("height-st").value.trim(),t=document.getElementById("weight-st").value.trim(),n=document.getElementById("age-st").value.trim(),o=document.getElementById("sex-st").textContent.trim();return e&&t&&n&&o}()||(console.log("Settings saved!"),function(){const e=document.getElementById("height-st"),t=document.getElementById("weight-st"),n=document.getElementById("age-st"),o=document.getElementById("sex-st"),r=parseFloat(e.value),i=parseFloat(X(t.value)),a=parseInt(n.value,10),s=o.textContent,c=(2.20462*i).toFixed(1),l=r/2.54,d=`${Math.floor(l/12)}' ${Math.round(l%12)}"`,u=document.querySelector("#activity-container .clicked-st-activity .al-text-st"),p=u?u.textContent:null,g=document.querySelector("#goal-container .clicked-st-goal .al-text-st");v({gender:s,age:a,weight_kg:i,weight_pounds:c,height_cm:r,height_feet_and_inches:d,activityLevel:p,goal:g?g.textContent:null})}()),Q()}let te,ne;function oe(e){const[t,n]=e.split("-"),o=parseInt(n,10);if(!t||isNaN(o))throw new Error(`Invalid dataId format: ${e}`);return[t,o]}async function re(e){const t=e.currentTarget,n=t.dataset.meal,[o,r]=oe(n),i="ingredient"===o,a="dish"===o;if(t.classList.toggle("favorited"),t.classList.contains("favorited")){const e=document.querySelector(`[data-meal="${n}"].dislike`);e&&e.classList.contains("rejected")&&(e.classList.remove("rejected"),ae("rejected",!1,i,a)),ae("favorited",!0,i,a),E(o,r,"like").catch(e=>console.error("Failed to update preference:",e))}else ae("favorited",!1,i,a),E(o,r,"neutral").catch(e=>console.error("Failed to update preference:",e))}function ie(e){const t=e.currentTarget,n=t.dataset.meal,[o,r]=oe(n),i="ingredient"===o,a="dish"===o;if(t.classList.toggle("rejected"),t.classList.contains("rejected")){const e=document.querySelector(`[data-meal="${n}"].like`);e&&e.classList.contains("favorited")&&(e.classList.remove("favorited"),ae("favorited",!1,i,a)),ae("rejected",!0,i,a),E(o,r,"dislike").catch(e=>console.error("Failed to update preference:",e))}else ae("rejected",!1,i,a),E(o,r,"neutral").catch(e=>console.error("Failed to update preference:",e))}function ae(e,t,n,o){if(n){const n=document.getElementById("ingredientsPreferred"),o=document.getElementById("ingredientsBlocked");"favorited"===e?ce(n,t):"rejected"===e&&ce(o,t)}else if(o){const n=document.getElementById("mealsPreferred"),o=document.getElementById("mealsBlocked");"favorited"===e?ce(n,t):"rejected"===e&&ce(o,t)}}function se(e){const t={dish:{selector:".dish-card-p",counters:{preferred:"mealsPreferred",blocked:"mealsBlocked"}},ingredient:{selector:".ingredient-card-p",counters:{preferred:"ingredientsPreferred",blocked:"ingredientsBlocked"}}}[e];if(!t)return void console.error(`Invalid item type: ${e}`);const n=document.querySelectorAll(t.selector);let o=0,r=0;n.forEach(e=>{const t=e.querySelector(".like"),n=e.querySelector(".dislike");t?.classList.contains("favorited")&&o++,n?.classList.contains("rejected")&&r++});const i=document.getElementById(t.counters.preferred),a=document.getElementById(t.counters.blocked);i&&(i.textContent=o),a&&(a.textContent=r)}function ce(e,t){if(e){const n=Number(e.textContent)||0,o=t?n+1:n-1;e.textContent=Math.max(0,o)}}function le(e){return e?e.replace(/[0-9]/g,"").toLowerCase():""}function de(){const e=function(){const e=document.querySelectorAll("#ingredientsContainer .checkbox-overlay"),t=[];return e.forEach((e,n)=>{if(e.checked){const o=e.closest(".card.ingredient").querySelector(".form-input.ingredient"),r=parseFloat(o.value)||0;t.push([n,r])}}),t}();let t=0,n=0,o=0,r=0,i=[];return e.forEach(e=>{const[a,s]=e;t+=te[a].calories_per_UoM/100*s,n+=te[a].protein_per_UoM/100*s,o+=te[a].carbs_per_UoM/100*s,r+=te[a].fats_per_UoM/100*s;let c=le(te[a].Unit_of_Measurement);i.push({ingredient_id:te[a].ingredient_id,unit_of_measurement:c,amount:s})}),{calories:Math.round(t),protein:Math.round(n),carbs:Math.round(o),fat:Math.round(r),ingredients:i}}function ue(){const e=document.getElementById("editMealOverlay");e&&(e.classList.add("hidden"),document.body.style.overflow="auto")}function pe(){const e=document.getElementById("editIngredientOverlay");e&&(e.classList.add("hidden"),document.body.style.overflow="auto")}function ge(){const e=document.getElementById("tagInput"),t=e.value.trim();if(t){const n=document.getElementById("tagsContainer"),o=document.createElement("div");o.className="tag-o-p",o.innerHTML=`\n                    <span>${t}</span>\n                    <button class="tag-remove">\n                    <img src="./assets/icons/remove-tag.svg" alt="">\n                    </button>\n                `,n.appendChild(o),e.value="";const r=document.querySelector(".tag-remove");r.addEventListener("click",function(){r.parentElement.remove()})}}function me(e,t,n,o,r=[],i="#dishes-list-p"){const a=`dish-${t}`,s=`\n    <li class="card drop-shadow dish-card-p">\n        <div class="swipe-delete">Delete</div>\n        <div class="swipe-content">\n            <span class="item-id">${t}</span>\n            <div class="first-row-of-dish">\n                <div class="descr-p">\n                    <h3 class="title-p">${e}</h3>\n                    <div class="dish-info-p">\n                        <p class="subtext">${n} ckal</p>\n                        <div class="subtext-point"></div>\n                        <p class="subtext">${o} min</p>\n                    </div>\n                </div>\n                <div class="preference-buttons">\n                    <button aria-label="Gericht favorisieren" class="like" data-meal="${a}">\n                        <svg class="star-icon" src="./assets/icons/star.svg" alt="star"></svg>\n                    </button>\n                    <button aria-label="Gericht blockieren" class="dislike" data-meal="${a}">\n                        <svg class="cross-icon" viewBox="0 0 24 24" fill="none" stroke-width="2"\n                            stroke-linecap="round" stroke-linejoin="round">\n                            <line x1="18" y1="6" x2="6" y2="18"></line>\n                            <line x1="6" y1="6" x2="18" y2="18"></line>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n            <div class="tags-container-p">\n                ${r.map(e=>`<button class="tag-p">${e}</button>`).join("")}\n            </div>\n        </div>\n    </li>\n    `,c=document.querySelector(i);if(!c)return;c.insertAdjacentHTML("beforeend",s);const l=c.lastElementChild,d=l.querySelector(".like"),u=l.querySelector(".dislike");d.addEventListener("click",re),u.addEventListener("click",ie)}async function he(){const e=document.getElementById("addBtn-p");e.disabled=!0;const t=de(),n=document.getElementById("mealName-p").value,o=t.calories,r=t.protein,i=t.fat,a=t.carbs,l=document.getElementById("time-p").value,d=document.getElementById("vmScore-p").value;let u=document.getElementById("category-p").textContent.trim();const p=Array.from(document.querySelectorAll(".tag-o-p span")).map(e=>e.textContent),g=t.ingredients;"lunch/dinner"===u&&(u="Main");const m={name:n,preparation:document.getElementById("instructions-p").value,vmScore:d,category:u,time:l,calories:o,protein:r,fat:i,carbs:a,tags:JSON.stringify(p),ingredients:g};(function(e){if(!e.name||""===e.name.trim())return alert("Please enter a meal name."),!1;if(!e.time||isNaN(e.time)||parseInt(e.time)<=0)return alert("Please enter a valid cooking time (greater than 0)."),!1;if(!e.vmScore||isNaN(e.vmScore))return alert("Please enter a valid VM score."),!1;if(!e.category||"Select Category"===e.category||"Protein"===e.category)return alert("Please select a valid category."),!1;if(!e.preparation||""===e.preparation.trim())return alert("Please enter cooking instructions."),!1;if(!e.ingredients||0===e.ingredients.length)return alert("Please select at least one ingredient."),!1;for(let t of e.ingredients)if(!t.amount||isNaN(t.amount)||parseFloat(t.amount)<=0)return alert(`Please enter a valid amount for ingredient ID: ${t.ingredient_id}.`),!1;return!0})(m)&&(ue(),me(n,(await async function(e){try{const t=c();return await s("/add-dish",e,t)}catch(t){alert("Failed to add new dish: "+t.message)}}(m)).dishId,o,l,p),function(){document.getElementById("mealName-p").value="",document.getElementById("time-p").value="",document.getElementById("vmScore-p").value="",document.getElementById("instructions-p").value="",document.getElementById("tagsContainer").innerHTML="",document.getElementById("ingredientsContainer").innerHTML="",document.getElementById("category-p").textContent="breakfast";const e=document.getElementById("editMealOverlay");e.scrollTop=0;const t=e.querySelector(".add-meal-card");t&&(t.scrollTop=0)}()),e.disabled=!1}function fe(e,t,n,o="ingredients-list-p"){const r=`ingredient-${t}`,i=`\n        <li class="card drop-shadow ingredient-card-p">\n            <span class="item-id">${t}</span>\n            <div class="swipe-delete">Delete</div>\n            <div class="swipe-content">\n                <div class="descr-p">\n                    <h3 class="title-p">${e}</h3>\n                    <p class="subtext">${n}</p>\n                </div>\n\n                <div class="preference-buttons">\n                    <button aria-label="Zutat favorisieren" class="like" data-meal="${r}">\n                        <img class="star-icon" src="./assets/icons/star.svg" alt="star">\n                    </button>\n                    <button aria-label="Zutat blockieren" class="dislike" data-meal="${r}">\n                        <svg class="cross-icon" viewBox="0 0 24 24" fill="none" stroke-width="2"\n                            stroke-linecap="round" stroke-linejoin="round">\n                            <line x1="18" y1="6" x2="6" y2="18"></line>\n                            <line x1="6" y1="6" x2="18" y2="18"></line>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n        </li>\n    `,a=document.getElementById(o);if(!a)return;a.insertAdjacentHTML("beforeend",i);const s=a.lastElementChild,c=s.querySelector(".like"),l=s.querySelector(".dislike");c.addEventListener("click",re),l.addEventListener("click",ie)}async function xe(){const e=document.getElementById("addIngredientSubmitBtn");e.disabled=!0;const t=document.getElementById("ingredientName-p").value.trim(),n=document.getElementById("ingredientCategory-p").textContent.trim(),o=document.getElementById("ingredientProtein-p").value.trim(),r=document.getElementById("ingredientFat-p").value.trim(),i=document.getElementById("ingredientCarbs-p").value.trim(),a=document.getElementById("ingredientCalories-p").value.trim(),l=document.getElementById("ingredientUnit-p").textContent.trim();let d=document.getElementById("ingredientUnit-p").textContent.trim();"grams"!==l&&"milliliters"!==l||(d=`100 ${document.getElementById("ingredientUnit-p").textContent.trim()}`);const u={name:t,uom:d,calories:a,carbs:i,fats:r,protein:o,category:n};if((p=u).name&&""!==p.name.trim()?p.category&&""!==p.category.trim()&&"Select Category"!==p.category?isNaN(p.calories)||p.calories<=0?(alert("Please enter a valid number for calories (must be greater than 0)."),document.getElementById("ingredientCalories-p").focus(),0):isNaN(p.protein)||p.protein<0?(alert("Please enter a valid number for protein (0 or more)."),document.getElementById("ingredientProtein-p").focus(),0):isNaN(p.fats)||p.fats<0?(alert("Please enter a valid number for fat (0 or more)."),document.getElementById("ingredientFat-p").focus(),0):isNaN(p.carbs)||p.carbs<0?(alert("Please enter a valid number for carbs (0 or more)."),document.getElementById("ingredientCarbs-p").focus(),0):p.uom&&""!==p.uom.trim()&&"Select Unit"!==p.uom||(alert("Please select a unit."),document.getElementById("ingredientUnit-p").focus(),0):(alert("Please select a category."),document.getElementById("ingredientCategory-p").focus(),0):(alert("Please enter an ingredient name."),document.getElementById("ingredientName-p").focus(),0)){pe(),Ht();const e=await async function(e){try{const t=c();return await s("/add-ingredient",e,t)}catch(t){alert("Failed to add new ingredient: "+t.message)}}(u);fe(t,e.ingredientId,n),document.getElementById("ingredientName-p").value="",document.getElementById("ingredientProtein-p").value="",document.getElementById("ingredientFat-p").value="",document.getElementById("ingredientCarbs-p").value="",document.getElementById("ingredientCalories-p").value="",document.getElementById("ingredientCategory-p").textContent="fruits",document.getElementById("ingredientUnit-p").textContent="piece"}var p;e.disabled=!1}function ve(){const e="#1BCE86",t="#7F8DFF",n="#E35252";switch(l().role){case"user":default:document.documentElement.style.setProperty("--accent-color",e);break;case"cook":document.documentElement.style.setProperty("--accent-color",t);break;case"admin":document.documentElement.style.setProperty("--accent-color",n)}}async function be(e){se("ingredient"),await async function(e){try{const t=c();return await s("/delete-ingredient",{ingredientID:e},t)}catch(t){alert("Failed to delete ingredient: "+t.message)}}(e)}async function ye(e){se("dish"),await async function(e){try{const t=c();return await s("/delete-dish",{dishID:e},t)}catch(t){alert("Failed to delete dish: "+t.message)}}(e)}const we=new Map;let ke=new Map;function Ee(e,t){return{breakfast:Le(e.breakfast,t[0]),lunch:Le(e.lunch,t[1]),dinner:Le(e.dinner,t[2]),puffer:null}}function Le(e,t){if(e.total_calories===t)return e;const[n,o]=je(e.total_calories,.2);return n<=t&&t<=o?Ce(e,t/e.total_calories):t>o?Ce(e,o/e.total_calories):t<n?Ce(e,n/e.total_calories):e}function Ce(e,t){const n=e.ingredients?.map(e=>({...e,amount_scaled:(e.amount*t).toFixed(1)}))||[];return{dish_id:e.dish_id,name:e.name,preparation:e.preparation,vm_score:e.vm_score,meal_category:e.meal_category,preparation_time_in_min:e.preparation_time_in_min,total_calories:Math.round(e.total_calories*t),total_protein:Math.round(e.total_protein*t),total_fat:Math.round(e.total_fat*t),total_carbs:Math.round(e.total_carbs*t),tags:e.tags,ingredients:n,factor:t}}async function Ie(e,t,n,o){console.log("DAY START"),ke=new Map;const r=e[0],i=e[1],a=e[2];e[3];const s={breakfast:null,lunch:null,dinner:null,puffer:null};return s.breakfast=await Se(r,t,o),s.lunch=await Se(i,n,o),function(e){if(e){const t=ke.get(e.dish_id)||0;ke.set(e.dish_id,t+1)}}(s.lunch),s.dinner=await Se(a,n,o),s}async function Se(e,t,n){for(let o=0;o<=.2;o+=.05){const r=_e(e,o),i=t.filter(e=>qe(je(e.total_calories,.2),r));if(i.length>0)return await Be(i,n)}return function(e){return console.warn(`⚠️ Kein Gericht gefunden für kcal-Ziel ${e}`),{name:"Kein Gericht gefunden",preparation:"-",total_calories:0,total_protein:0,total_fat:0,total_carbs:0,vm_score:0,preparation_time_in_min:0}}(e)}async function Be(e,t){if(1===e.length)return console.log("only one candidate found"),e[0];const n=new Set(t.preferredDishes||[]),o=new Set(t.preferredIngredients||[]),r=new Set(t.blockedDishes||[]),i=new Set(t.blockedIngredients||[]);function a(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}const s=[],c=[],l=[],d=[],u=[],p=[];for(const h of e){const e=h.dish_id,t=we.get(e)||0;(ke.get(e)||0)>=1?d.push(h):t>=2?(h._source="duplicates (global)",d.push(h)):n.has(e)?(h._source="preferredDishes",s.push(h)):ze(h,o)?(h._source="preferredIngredients",c.push(h)):r.has(e)?(h._source="blockedDishes",p.push(h)):ze(h,i)?(h._source="blockedIngredients",u.push(h)):(h._source="neutral",l.push(h))}const g=[...a(s),...a(c),...a(l),...a(d),...a(u),...a(p)],m=g[0];if(m){const e=we.get(m.dish_id)||0;we.set(m.dish_id,e+1)}return function(e){const t=e.map(e=>({dish_id:e.dish_id,source:e._source||"unknown"}));console.warn("[Debug] Zusammengesetztes Kandidaten-Array:",t)}(g),m||null}function ze(e,t){return!!Array.isArray(e.ingredientIDs)&&e.ingredientIDs.some(e=>t.has(e))}function _e(e,t){const n=e*t;return[e-n,e+n]}function je(e,t){const n=e*t;return[e-n,e+n]}function qe(e,t){const[n,o]=e,[r,i]=t;return o>=r&&n<=i}async function Ae(){let e=await async function(){const e=c();return await a("/get-week-plan",e)}();return e&&0!==e.length||(console.warn("Week plan not found in database. Generating a new one..."),e=await $e()),console.warn("Week plan loaded from DB:",e),e}async function $e(){let e=await Oe();return console.log("Optimal daily Calories!: "+e),await async function(e){const[t,n,o]=await Promise.all([h("breakfast"),h("main"),L()]);console.log("Dishes for breakfast:",t),console.log("Dishes for main:",n),console.warn("[algo.js] => Preferences loaded:",o);const r=function(e){return[.3*e,.36*e,.34*e]}(e),i=[];for(let a=0;a<7;a++){const e=Ee(await Ie(r,t,n,o),r);i.push(e)}return console.log("Generated week plan:",i),i}(e)}function Te(){const e=new Date,t=function(e){const t=new Date(e),n=e.getDay(),o=0===n?6:n-1;t.setDate(e.getDate()-o);const r=[];for(let i=0;i<7;i++){const e=new Date(t);e.setDate(t.getDate()+i),r.push(e)}return r}(e);return{today:e,currentWeek:t}}function De(e,t,n,o){const r=10*n+6.25*o-5*t;return"male"===e?r+5:r-161}const Fe=-200,Me=0,Ne=200;async function Oe(){let e=0;const{gender:t,age:n,weight_kg:o,weight_pounds:r,height_cm:i,height_feet_and_inches:a,activityLevel:s,goal:c}=await b();if(t&&n&&o&&i&&s&&c){const r=t.toLowerCase().trim(),a=n,l=o,d=i,u=function(e){return{"very low":1.2,low:1.375,moderate:1.55,active:1.725,"very active":1.9}[e.toLowerCase()]||1.55}(s),p=function(e){const t=e.toLowerCase().trim();return{"losing weight":Fe,"maintaining weight":Me,"gaining weight":Ne}[t]||0}(c);e=function(e,t,n,o,r,i){let a=0;switch(i){case Fe:case Me:case Ne:a=De(e,t,n,o)}const s=a*r;return Math.round(s+i)}(r,a,l,d,u,p),console.log("Calculated optimal calories: "+e)}return e}async function Pe(e,t){const n={};return e.forEach((e,o)=>{const r=e.getDate();n[r]=function(e){let t="";return t+=Ue(e.breakfast,"Breakfast"),t+=Ue(e.lunch,"Lunch"),t+=Ue(e.dinner,"Dinner"),t}(t[o])}),x(t),n}function He(){const e=document.querySelector(".day.selected");return e?parseInt(e.getAttribute("data-day")):null}function Ue(e,t){return`\n    <div class="card drop-shadow plan-meal-card" data-id="${e.dish_id}">\n        <div class="meal-header-mp">\n            <div>\n                <h3 class="meal-title-mp">${e.name}</h3>\n                <p class="subtext">${t}</p>\n            </div>\n            <div class="meal-calories-mp">${e.total_calories} kcal</div>\n        </div>\n        <div class="nutrition-values-mp">\n            <div class="nutrition-item-mp">\n                <p class="nutrition-value-mp">${e.total_protein}g</p>\n                <p class="nutrition-label-mp subtext">Protein</p>\n            </div>\n            <div class="nutrition-item-mp">\n                <p class="nutrition-value-mp">${e.total_carbs}g</p>\n                <p class="nutrition-label-mp subtext">Carbs</p>\n            </div>\n            <div class="nutrition-item-mp">\n                <p class="nutrition-value-mp">${e.total_fat}g</p>\n                <p class="nutrition-label-mp subtext">Fat</p>\n            </div>\n            <div class="nutrition-item-mp">\n                <p class="nutrition-value-mp">${e.vm_score}</p>\n                <p class="nutrition-label-mp subtext">VM score</p>\n            </div>\n        </div>\n        <div class="meal-details-mp">\n            <div class="footer-mp">\n                <img class="clock-logo-mp" src="./assets/icons/clock.svg" alt="clock">\n                <p class="footer-text-mp">${e.preparation_time_in_min}</p>\n            </div>\n            <div class="footer-mp">\n                <img class="users-logo-mp" src="./assets/icons/users.svg" alt="users">\n                <p class="footer-text-mp">${(e.factor??1).toFixed(1)} serving</p>\n            </div>\n        </div>\n    </div>\n    `}function Re(e,t){const n=t[e]||"",o=document.getElementById("content-section");o&&(o.innerHTML=n)}function Ve(e,t){document.querySelectorAll(".day").forEach(e=>{e.replaceWith(e.cloneNode(!0))}),document.querySelectorAll(".day").forEach(n=>{n.addEventListener("click",()=>{document.querySelectorAll(".day").forEach(e=>e.classList.remove("selected")),n.classList.add("selected"),Re(parseInt(n.getAttribute("data-day")),e),We(t)})});const n=He();n&&Re(n,e)}function We(e){document.getElementById("viewDishOverlay").addEventListener("click",function(e){e.target===this&&(Ye(),Ht(),Je(),Xe(0),Ge(0))}),document.getElementById("navOverlay").addEventListener("click",function(e){(function(){const e=null!=document.querySelector("#meal-plan");return e})()&&(Ye(),Ht(),Je(),Xe(0),Ge(0))}),document.querySelector("#close-view-dish").addEventListener("click",function(e){Ye(),Ht(),Je(),Xe(0),Ge(0)}),document.getElementById("reset-cooking-process").addEventListener("click",function(e){document.querySelectorAll("#view-dish-instructions-list .checkbox-overlay:checked").forEach(e=>{e.checked=!1}),Xe(0),Ge(0)}),document.querySelectorAll(".plan-meal-card").forEach(t=>{const n=t.dataset.id;t.addEventListener("click",()=>{!function(){const e=document.getElementById("viewDishOverlay");e&&(e.classList.remove("hidden"),document.body.style.overflow="hidden")}(),Ut(),function(e,t){const n=function(e,t){for(const n of t)for(const t of Object.values(n))if(t&&t.dish_id===Number(e))return t;return null}(e,t);(function(e){document.getElementById("view-dish-name").textContent=e.name,document.getElementById("view-kcal").textContent=e.total_calories,document.getElementById("view-prep-time").textContent=e.preparation_time_in_min,document.getElementById("view-protein-amount").textContent=e.total_protein+"g",document.getElementById("view-carbs-amount").textContent=e.total_carbs+"g",document.getElementById("view-fat-amount").textContent=e.total_fat+"g",document.getElementById("view-vm-score").textContent=e.vm_score})(n),function(e){const t=document.getElementById("view-dish-ingredients-list");for(const n in e){let o=Ze(e[n]);t.insertAdjacentHTML("beforeend",o)}}(n.ingredients),function(e){const t=document.getElementById("view-dish-instructions-list");Object.entries(e).forEach(([e,n])=>{const o=function(e,t){return`\n    <li class="view-instruction-step-el">\n        <input type="checkbox" class="checkbox-overlay">\n        <div class="view-instruction-text-container">\n            <p class="view-instruction-header">Step ${e}</p>\n            <p class="view-instruction-text">${t}</p>\n        </div>\n    </li>\n    `}(e,n);t.insertAdjacentHTML("beforeend",o)})}(function(e){const t=e.match(/(\d)([^0-9]+)/g),n={};return t&&t.forEach(e=>{const t=e.match(/^\d/)[0],o=e.slice(2).trim();n[t]=o}),n}(n.preparation)),function(){const e=Ke();document.getElementById("view-total-number").textContent=e}()}(n,e),document.querySelectorAll(".checkbox-overlay").forEach(e=>{e.addEventListener("change",e=>{const t=document.querySelectorAll("#view-dish-instructions-list .checkbox-overlay:checked");Xe(t.length),Ge(t.length)})})})})}function Ge(e){let t="0%";0!==e&&(t=(e/Ke()*100).toFixed(1)+"%");const n=document.getElementById("cooking-progress-fill"),o=document.getElementById("view-%-steps");n.style.width=t,o.textContent=t}function Ye(){const e=document.getElementById("viewDishOverlay");e&&(e.classList.add("hidden"),document.body.style.overflow="auto")}function Ke(){return document.getElementById("view-dish-instructions-list").querySelectorAll("li").length}function Xe(e){document.getElementById("view-completed-number").textContent=e}function Je(){const e=document.getElementById("view-dish-instructions-list"),t=document.getElementById("view-dish-ingredients-list");e.innerHTML="",t.innerHTML=""}function Ze(e){return`\n    <li class="view-dish-ingredient-el">\n        <p class="view-dish-ingredient-name">${e.name}</p>\n        <p class="subtext view-dish-ingredient-amount">${e.amount_scaled} ${e.unit_of_measurement}</p>\n    </li>\n    `}function Qe(e,t){if(!function(){const e=localStorage.getItem("soundEnabled");return null===e||"true"===e}())return;const n=new Audio(`./assets/sounds/${t}`);n.volume=e,n.play()}function et(){Qe(.2,"checkbox.mp3")}async function tt(){Pt();const e=document.getElementById("app"),t=await o("./html-pages/home.html");e.innerHTML=t,Y(document.getElementById("home-container")),K(),function(){const e=l(),t=document.getElementById("admin-panel");e&&"admin"===e.role?(document.querySelector("#home-container").style.gridTemplateRows="auto auto 1fr",t.classList.remove("hidden-admin-panel")):t.classList.add("hidden-admin-panel")}(),ve(),setTimeout(()=>{it()},1),await ot(),Z()}function nt(){const e=document.getElementById("checked-circle");e&&e.addEventListener("change",async()=>{et(),await async function(e){return new Promise(t=>setTimeout(t,e))}(100);let t=await lt(),n="breakfast";[t,n]=await async function(e){const t=Object.keys(e);for(let n=0;n<t.length-1;n++){const o=t[n];if(!e[o].eaten){const r=t[n+1];return e[o].eaten=!0,await w(e),[e,r]}}return[null,null]}(t);let o=function(e,t){return e[t]||null}(t,n);await ct(t),setTimeout(()=>{ut(o,n),e.checked=!1},300)})}async function ot(){const e=document.querySelector(".tab.active"),t=document.getElementById("admin-container");if(e&&"Standard"===e.textContent.trim()&&t){const e=await o("./html-pages/homeStandard.html");t.innerHTML=e;let n=await lt();await w(n),rt(n),function(e){const t=document.getElementById("todays-meals-container");if(t&&0===t.children.length){const n=Object.keys(e);for(let o=0;o<n.length-1;o++){const r=n[o];t.appendChild(pt(o,e,r))}}}(n),await ct(n),document.querySelectorAll(".tab").forEach(e=>{e.addEventListener("click",async function(){document.querySelectorAll(".tab").forEach(e=>{e.classList.remove("active")}),this.classList.add("active"),await ot()})})}else{const e=await o("./html-pages/homeRoles.html");t.innerHTML=e,await ht()}}function rt(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const o=t[n],r=e[o];if(r&&!r.eaten)return void ut(r,o)}ut(null)}function it(){const e=l(),t=document.getElementById("greeting-container");t&&(t.innerHTML=`\n        <div id="greeting-text">\n            <span class="roboto">Hi,</span>\n            <span class="roboto">${e.username}</span>\n        </div>\n        <div id="card-um${gt(e.role)}" class="tag">\n            <img class="tag-logo" src="./assets/icons/userRoleIcon${gt(e.role)}.svg" alt="tag">\n            <span id="text-um${gt(e.role)}" class="tag-text">${mt(e.role)}</span>\n        </div>\n        `)}async function at(e=null){const{today:t,currentWeek:n}=Te(),o=function(e,t){for(let n=0;n<t.length;n++)if(t[n].getTime()===e.getTime())return n}(t,n);return e||x(e=await Ae()),e[o]}async function st(e,t){let n=e/t*100;return n>100?100:n}async function ct(e){let t=await Oe(),n=function(e){let t=0;const n=Object.keys(e);for(let o=0;o<n.length-1;o++){const r=n[o];e[r].eaten&&(t+=e[r].total_calories)}return t}(e);console.log("Eaten Kcal:",n),console.log("Optimal Kcal:",t),function(e){const t=document.querySelector(".progress-text");t&&(t.textContent=`${e} kcal`)}(n),await async function(e,t){const n=document.querySelector(".progress-bar");if(n){let o=await st(e,t);n.style.setProperty("--progress-in-percent",o)}}(n,t),async function(e){const t=function(e){return Object.values(e).filter(e=>null!=e).length}(e),n=document.getElementById("planned-meals-h");t&&n&&(n.textContent=t)}(e),async function(e,t){const n=await st(e,t),o=document.getElementById("goal-percentage-h");o&&(o.textContent=`${Math.round(n)}%`)}(n,t),function(e){const t=document.getElementById("todays-meals-container");if(t){const n=Object.keys(e);for(let o=0;o<n.length-1;o++){const r=n[o];for(const n of t.children){let t=n.querySelector(".item-id").textContent;o===Number(t)&&(e[r].eaten?n.querySelector(".check-point-db").classList.add("active"):n.querySelector(".check-point-db").classList.remove("active"))}}}}(e)}async function lt(e=!1){let t=await async function(){const e=c();return await a("/get-next-meals",e)}();return t&&0!==Object.keys(t).length&&!e||(t=dt(await at()),console.log("First meals save:",t)),t}function dt(e,t=!1){return Object.keys(e).forEach(n=>{e[n]&&(e[n].eaten=t)}),e}function ut(e,t){if(!e)return void function(){const e=document.querySelector(".next-meal-container");document.querySelector(".congratulations-message-db")||(e.innerHTML='\n        <div class="congratulations-message-db">     \n            <span> Congratulations! 🎉</span>\n            <span>You have achieved your goal!</span> \n            <button id="congrats-link">reset</button>\n        </div>\n        ',document.getElementById("congrats-link").addEventListener("click",async()=>{let e=await lt(!0);await w(e),rt(e),await ct(e)}))}();const n=document.querySelector(".congratulations-message-db");n&&n.remove();const o=document.querySelector(".next-meal-container");var r;o&&(o.innerHTML=`   <div class="card drop-shadow next-meal-card-db">\n                <div class="first-row-db">\n                    <input id="checked-circle" class="checkbox" type="checkbox">\n                    <label for="checked-circle" class="sr-only">Auswahl für ${e.name}</label>\n\n                    <div class="next-meal-info">\n                        <div class="next-meal-info-texts">\n                            <h3 class="meal-name-db">${e.name}</h3>\n                            <span class="subtext meal-category-h">${r=t,r.charAt(0).toUpperCase()+r.slice(1)}</span>\n                        </div>\n\n                        <span class="calories-db">\n                        ${e.total_calories} kcal\n                        </span>\n                    </div>\n                </div>\n\n                <div class="nutrition-values-db">\n                    <div class="nutrition-item-db">\n                        <p class="nutrition-value-db">${e.total_protein}</p>\n                        <p class="nutrition-label-db subtext">Protein</p>\n                    </div>\n                    <div class="nutrition-item-db">\n                        <p class="nutrition-value-db">${e.total_carbs}</p>\n                        <p class="nutrition-label-db subtext">Carbs</p>\n                    </div>\n                    <div class="nutrition-item-db">\n                        <p class="nutrition-value-db">${e.total_fat}</p>\n                        <p class="nutrition-label-db subtext">Fat</p>\n                    </div>\n                </div>\n            </div>\n        `),nt()}function pt(e,t,n){let o=t[n];const r=document.createElement("li");return r.className="card drop-shadow mealcards-db",r.innerHTML=`<div class="check-point-db"></div>\n                    <div class="todays-meal-info">\n                        <span class="item-id">${e}</span>\n                        <h3 class="meal-name-db">${o.name}</h3>\n                        <span class="subtext">${n}</span>\n                    </div>\n                    <h3 class="todays-calories">${o.total_calories} kcal</h3>`,r}function gt(e){return"user"===e?1:"cook"===e?2:"admin"===e?3:void 0}function mt(e){return"user"===e?"User":"cook"===e?"Chef":"admin"===e?"Admin":void 0}async function ht(){const e=document.getElementById("user-list");e.innerHTML="",(await async function(){return await a("/users",c())}()).forEach(t=>{const n=t.username.split(" ").map(e=>e[0].toUpperCase()).join("").slice(0,2),o=document.createElement("li");o.classList.add("card","user"),o.innerHTML=`\n        <div class="swipe-delete">Delete</div>\n        <div class="swipe-content">\n            <span class="item-id">${t.user_id}</span>\n            <div class="profile-picture">\n                <span>${n}</span>\n            </div>\n            <div class="user-data">\n                <span class="user-name">${t.username}</span>\n                <span class="user-email">${t.email}</span>\n            </div>\n            <div id="user-role">\n                <div class="user-tag" id="card-um${gt(t.role)}">\n                    <img class="user-tag-logo" src="./assets/icons/userRoleIcon${gt(t.role)}.svg" alt="tag">\n                    <span id="text-um${gt(t.role)}" class="user-tag-text">${mt(t.role)}</span>\n                </div>\n                <object id="change-role" src="./assets/icons/change-role.svg" alt="change role"></object>\n            </div>\n        </div>\n        `,e.appendChild(o)}),vt(),e&&C(e,".card.user",ft),document.querySelectorAll("#change-role").forEach(e=>{e.addEventListener("click",xt)}),S("user-search-bar",["#user-list"])}async function ft(e){!async function(e){try{const t=c();return await s("/delete-user",{userID:e},t)}catch(t){return alert("Failed to delete user: "+t.message),!1}}(e),setTimeout(()=>{},2e3),console.warn("TOTAL USERS ARE BEING RENDERED AGAIN"),vt()}async function xt(e){const t=e.target.closest(".user"),n=(t.querySelector(".user-name").textContent,t.querySelector(".user-email").textContent),o=t.querySelector(".user-tag-text").textContent,r="User"===(i=o)?"user":"Chef"===i?"cook":"Admin"===i?"admin":void 0;var i;!function(e,t,n){if("admin"===e){const e=l();if(e.email===n)throw alert("You cannot change your own role."),new Error("Admin role change denied for self.");if("admin"!==e.name&&"admin@admin.com"!==e.email)throw alert("You cannot change the role of an admin."),new Error("Admin role change denied for super user.")}}(r,0,n);const a=["user","cook","admin"][gt(r)%3];await f(a,n),ht(),it()}function vt(){const e=document.getElementById("total-users-amount");e&&(e.textContent=function(){const e=document.getElementById("user-list");return e?e.querySelectorAll("li").length:0}())}const bt=new Map;function yt(){document.querySelector(".grocery-list").addEventListener("click",Dt)}function wt(){const e=document.querySelectorAll(".grocery-list li"),t=function(e){return Array.from(e).filter(e=>e.querySelector(".checkbox-gl").checked)}(e),n=e.length,o=document.getElementById("checked-count-gl"),r=document.getElementById("total-count-gl");o&&r?(o.textContent=`${t.length}`,r.textContent=`${n}`):console.warn("Checked count or total count element not found!")}function kt(e){console.log("Deleting item with identifier:",e),async function(e){const t=c();if(!t||!e)throw new Error("Token or identifier is missing");await s("/delete-user-list-item",{identifier:e},t)}(e),wt()}function Et(e){const t=document.querySelector(".grocery-list"),n=document.createElement("li");n.className="grocery-item drop-shadow",n.innerHTML=Lt(e),It(n,e),Ct(n,e),e.is_checked&&St(n),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}function Lt(e){const t=Bt(e);return`\n        <div class="swipe-delete">Delete</div>\n        <div class="swipe-content">\n            <span class="item-id">${t}</span>\n            <input id="chk-${t}" class="checkbox checkbox-gl" type="checkbox" ${e.is_checked?"checked":""} />\n            <label for="chk-${t}" class="sr-only"> ${e.name} auswählen </label>\n            <div class="item-details">\n                <h3>${e.name}</h3>\n                <span class="category subtext">${e.category}</span>\n            </div>\n            <div class="quantity-control">\n                <button class="minus-btn" aria-label="Weniger"><svg src="./assets/icons/minus.svg" alt="-"></svg></button>\n                <span class="amount">${Math.round(e.amount)}</span>\n                <span class="unit">${zt(e.unit_of_measurement)}</span>\n                <button class="plus-btn" aria-label="Mehr"><svg src="./assets/icons/plus.svg" alt="+"></svg></button>\n            </div>\n        </div>\n    `}function Ct(e,t){t.is_checked||e.querySelector(".item-details").addEventListener("click",()=>{!function(e,t){if(!Ft()){const n=e.cloneNode(!0),o='\n    <div id="new-item-container">\n        <div class="item-details-add">\n            <input id="name-gl" type="text" placeholder="Item Name" />\n            <div class="custom-select">\n                <div class="select-trigger">\n                    <span class="select-text">Protein</span>\n                    <div class="select-arrow"></div>\n                </div>\n                <div class="select-dropdown">\n                    <div class="select-option" data-value="Protein">Protein</div>\n                    <div class="select-option" data-value="Fruits">Fruits</div>\n                    <div class="select-option" data-value="Dairy">Dairy</div>\n                </div>\n            </div>\n        </div>\n        <div class="quantity-control-add">\n            <input id="number-gl" type="number" placeholder="100" />\n            <div class="custom-select unit-gl">\n                <div class="select-trigger">\n                    <span class="select-text">Select Unit</span>\n                    <div class="select-arrow"></div>\n                </div>\n                <div class="select-dropdown">\n                    <div class="select-option" data-value="g">g</div>\n                    <div class="select-option" data-value="pcs">pcs</div>\n                    <div class="select-option" data-value="ml">ml</div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="buttons-container">\n        <button class="cancel-btn">Cancel</button>\n        <button class="save-btn">Save</button>\n    </div>\n    ';!function(e){e.id="newItem";const t="grocery-item drop-shadow addingContainer";e.className=t}(e),e.innerHTML=o,jt(),function(e,t){const n=e.querySelector("#new-item-container");n.querySelector('input[type="text"]').value=t.name||"",n.querySelector('input[type="number"]').value=Math.round(t.amount)||"";const o=n.querySelectorAll(".custom-select");o[0].querySelector(".select-text").textContent=t.category||"Protein",o[1].querySelector(".select-text").textContent=zt(t.unit_of_measurement)||"g"}(e,t);const r=e.querySelector(".save-btn"),i=e.querySelector(".cancel-btn");r.addEventListener("click",()=>{!function(e,t,n){const o=$t();if(!At(o))return;const r={...o.item,is_checked:0};k(Bt(n),r),function(e,t,n){(function(e,t){e.id=t.id||"",e.className=t.className||"grocery-item drop-shadow"})(e,t),e.innerHTML=Lt(n),Ct(e,n),It(e,n),yt(),C(e,".grocery-item",kt)}(e,t,r)}(e,n,t)}),i.addEventListener("click",()=>{e.replaceWith(n),It(n,t),Ct(n,t),wt()})}}(e,t)})}async function It(e,t){const n=e.querySelector(".checkbox-gl");n.addEventListener("change",o=>async function(e,t,n,o){const r=600;if(function(e,t,n,o){return"true"===e.dataset.locked?(n.preventDefault(),t.checked=!0,!0):(e.dataset.locked="true",setTimeout(()=>{delete e.dataset.locked},o),!1)}(t,o,e,r))return;const i={ingredient_id:n.ingredient_id||null,custom_name:n.name||null,category:n.category||null,amount:n.amount,unit_of_measurement:n.unit_of_measurement,is_checked:o.checked?1:0};wt(),await async function(e,t,n,o){const r=document.querySelector(".grocery-list");t?(function(e){const t=e.querySelector(".item-details");if(t){const e=t.cloneNode(!0);t.parentNode.replaceChild(e,t)}}(e),St(e),et(),await new Promise(e=>setTimeout(e,n)),r.appendChild(e)):(Ct(e,o),function(e){const t=e.querySelector(".quantity-control");t&&(t.style.display="flex")}(e),et(),r.insertBefore(e,r.firstChild))}(t,i.is_checked,r,n),await k(Bt(n),i),function(e){delete e.dataset.locked}(t)}(o,e,t,n))}function St(e){const t=e.querySelector(".quantity-control");t&&(t.style.display="none")}function Bt(e){return null!==e.ingredient_id&&void 0!==e.ingredient_id?e.ingredient_id:e.name?e.name:void console.error("Item has no valid identifier")}function zt(e){return"piece"===e?"pcs":e}function _t(e){return"pcs"===e?"piece":e}function jt(){newItem.querySelectorAll(".custom-select").forEach(e=>{new I(e)})}function qt(){const e=$t();var t;At(e)&&(Et(e.item),async function(e){const t=c();if(!t||!e)throw new Error("Token or item is missing");await s("/add-user-list-item",e,t)}({custom_name:(t=e.item).name,category:t.category,amount:t.amount,unit_of_measurement:t.unit_of_measurement}),Tt(),wt())}function At(e){return e.allFieldsFilled?e.isValidName?!!e.isUniqueName||(alert("An item with this name already exists."),!1):(alert("Please enter a valid name!\n(Name must not be empty, only numbers, or start with a number)"),!1):(alert("Please fill out all fields!"),!1)}function $t(){const e=document.getElementById("new-item-container"),t=e.querySelector('input[type="text"]').value.trim(),n=parseInt(e.querySelector('input[type="number"]').value,10),o=e.querySelectorAll(".custom-select"),r=o[0].querySelector(".select-text").textContent,i=_t(o[1].querySelector(".select-text").textContent);return{allFieldsFilled:!!(t&&n&&r&&i),isValidName:t.length>0&&!/^\d+$/.test(t)&&!/^\d/.test(t),isUniqueName:!0,name:t,amount:n,category:r,unit:i,item:{ingredient_id:null,name:t,custom_name:t,category:r,amount:n,unit_of_measurement:i,is_checked:0}}}function Tt(){const e=document.getElementById("newItem");e&&e.remove()}function Dt(e){if(e.target.closest(".swipe-delete"))return;const t=e.target.closest("button");if(!t||!t.closest(".quantity-control"))return;e.preventDefault();const n=t.closest(".swipe-content"),o=n.querySelector(".amount");if(!o)return;let r=parseInt(o.textContent,10);t.classList.contains("plus-btn")?o.textContent=r+1:t.classList.contains("minus-btn")&&r>1&&(o.textContent=r-1);const i=n.querySelector(".item-id").textContent;console.warn("IDENTIFIER: "+i);const a=function(e,t){const n={ingredient_id:isNaN(t)?null:t,custom_name:isNaN(t)?t:null,category:e.querySelector(".category").textContent,amount:parseInt(e.querySelector(".amount").textContent,10),unit_of_measurement:_t(e.querySelector(".unit").textContent),is_checked:e.querySelector(".checkbox-gl").checked?1:0};return n}(n,i),s=function(e){return"number"==typeof e?`id_${e}`:`name_${e}`}(i);!function(e,t,n){bt.has(e)&&clearTimeout(bt.get(e));const o=setTimeout(()=>{k(t,n),bt.delete(e)},1e3);bt.set(e,o)}(s,i,a)}function Ft(){return null!==document.getElementById("newItem")}!async function(){await p(["admin","cook","user"]);const e=await m();if("valid"===e)console.log("[TokenCheck] ✅ Alles in Ordnung");else{if("unknown"!==e)return void console.warn("[TokenCheck] ❌ Token ungültig/abgelaufen – Logout ausgelöst");console.warn("[TokenCheck] ⚠️ Serverproblem – Nutzer bleibt eingeloggt (Status unbekannt)")}setInterval(async()=>{console.log("[TokenCheck] 🔄 Starte regelmäßige Prüfung...");const e=await m();"valid"===e?console.log("[TokenCheck] ✅ Alles in Ordnung"):"unknown"===e?console.warn("[TokenCheck] ⚠️ Serverproblem – Nutzer bleibt eingeloggt (Status unbekannt)"):console.warn("[TokenCheck] ❌ Token ungültig/abgelaufen – Logout ausgelöst")},3e5),y(),ve(),J(),Ot()}();const Mt={home:tt,list:async function(){Pt();const e=document.getElementById("app"),t=await o("./html-pages/list.html");e.innerHTML=t,Y(document.getElementById("list-container")),K(),Z(),document.querySelectorAll("#filter-bar button").forEach(e=>{e.addEventListener("click",()=>{!function(e){document.querySelectorAll("#filter-bar button").forEach(t=>{t===e?(function(e){const t=e.textContent.trim(),n=Ft();document.querySelectorAll(".grocery-list li").forEach((e,o)=>{if(0===o&&n)return void(e.style.display="");const r=e.querySelector(".category").textContent.trim();e.style.display="All"===t||r.includes(t)?"":"none"})}(e),t.classList.add("active"),t.classList.remove("notActive")):(t.classList.remove("active"),t.classList.add("notActive"))})}(e)})}),document.getElementById("add-item-btn").addEventListener("click",()=>{document.getElementById("newItem")||function(e="grocery-item drop-shadow"){const t=document.querySelector(".grocery-list"),n=document.createElement("li");n.id="newItem",n.className=e,n.innerHTML='\n    <div id="new-item-container">\n        <div class="item-details-add">\n            <input id="name-gl" type="text" placeholder="Item Name" />\n            <div class="custom-select">\n                <div class="select-trigger">\n                    <span class="select-text">Protein</span>\n                    <div class="select-arrow"></div>\n                </div>\n                <div class="select-dropdown">\n                    <div class="select-option" data-value="Protein">Protein</div>\n                    <div class="select-option" data-value="Fruits">Fruits</div>\n                    <div class="select-option" data-value="Dairy">Dairy</div>\n                </div>\n            </div>\n        </div>\n        <div class="quantity-control-add">\n            <input id="number-gl" type="number" placeholder="100" />\n            <div class="custom-select unit-gl">\n                <div class="select-trigger">\n                    <span class="select-text">Select Unit</span>\n                    <div class="select-arrow"></div>\n                </div>\n                <div class="select-dropdown">\n                    <div class="select-option" data-value="g">g</div>\n                    <div class="select-option" data-value="pcs">pcs</div>\n                    <div class="select-option" data-value="ml">ml</div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="buttons-container">\n        <button class="cancel-btn">Cancel</button>\n        <button class="save-btn">Save</button>\n    </div>\n    ',t.insertBefore(n,t.firstChild),jt();const o=n.querySelector(".save-btn"),r=n.querySelector(".cancel-btn");o.addEventListener("click",qt),r.addEventListener("click",Tt)}("grocery-item drop-shadow addingContainer")}),function(e){e.forEach(e=>Et(e))}(await async function(){let e=await async function(){const e=c();return await a("/get-user-list-items",e)}();return e&&e.length>0?console.warn("Lade User List Items aus DB:",e):(console.warn("Keine User List Items gefunden – lade aus WeekPlan ..."),e=await async function(){const e=c();return await a("/get-ingredients-from-week-plan",e)}(),console.log("Ingredients from week plan:",e),await async function(e){const t=c();if(!t||!Array.isArray(e)||0===e.length)throw new Error("Token or items list is missing or empty");await s("/set-user-list-items",{items:e},t)}(e)),e}()),yt(),wt(),S("search-groceries",[".grocery-list"]),C(document.querySelector(".grocery-list"),".grocery-item",kt)},plan:async function(){Pt();const e=document.getElementById("app"),t=await o("./html-pages/plan.html");e.innerHTML=t,Y(document.getElementById("meal-plan")),K();const{today:n,currentWeek:r}=Te();await async function(e,t){!function(e,t){const n=e.getMonth(),o=e.getFullYear();(function(e,t,n){const o=document.getElementById("monthYear");o&&(o.innerHTML=`${e[t]}<br>${n}`)})(["January","February","March","April","May","June","July","August","September","October","November","December"],n,o),function(e,t){const n=document.getElementById("daysGrid");if(!n)return;n.innerHTML="";const o=e.getMonth();t.forEach(t=>{const r=document.createElement("div");r.className="day",r.textContent=t.getDate(),r.setAttribute("data-day",t.getDate()),t.toDateString()===e.toDateString()&&r.classList.add("selected"),t.getMonth()!==o&&r.classList.add("other-month"),n.appendChild(r)})}(e,t)}(e,t);const n=await Ae();await async function(e,t,n){const o=await Pe(t,n);Ve(o,n)}(0,t,n),We(n)}(n,r),function(e,t){const n=document.querySelector("#regenerate-plan");n&&n.addEventListener("click",async()=>{const e=He(),n=await $e(),o=await Pe(t,n);await async function(){const e=c();return await s("/delete-old-and-create-new-list",{},e)}();let r=await at(n);r=await dt(r),await w(r),Ve(o,n),e&&Re(e,o),We(n)})}(0,r),Z()},meals:async function(){te=await async function(){return await i("/ingredients")}(),ne=await async function(){return await i("/dishes")}(),Pt();const e=document.getElementById("app"),t=await o("./html-pages/meals.html");e.innerHTML=t,Y(document.querySelector(".meals-container")),K(),J(),function(){const e=l();!e||"cook"!==e.role&&"admin"!==e.role||document.querySelectorAll(".add-item-p").forEach(e=>{e.style.display="flex"})}(),ve(),async function(){ne.forEach(e=>{me(e.name,e.dish_id,e.total_calories,e.preparation_time_in_min,JSON.parse(e.tags))}),te.forEach(e=>{fe(e.name,e.ingredient_id,e.category)})}(),async function(){if(g("cook")||g("admin")){const e=document.getElementById("ingredients-list-p");e&&C(e,".ingredient-card-p",be)}if(g("cook")||g("admin")){const e=document.querySelector("#dishes-list-p");e&&C(e,".dish-card-p",ye)}}(),Z(),document.querySelectorAll("#filter-bar-p button").forEach(e=>{e.addEventListener("click",()=>{document.querySelector("#food-p").scrollTop=0,function(e){document.querySelectorAll("#filter-bar-p button").forEach(t=>{t===e?(function(e){const t=document.querySelector("#ingredients-preferences"),n=document.querySelector("#meals-preferences"),o=e.textContent.trim(),r=document.getElementById("ingredientsPreferredWhole"),i=document.getElementById("ingredientsBlockedWhole"),a=document.getElementById("mealsPreferredWhole"),s=document.getElementById("mealsBlockedWhole");t.style.display="Meals"===o?"none":"",n.style.display="Ingredients"===o?"none":"",r.style.display="Meals"===o?"none":"",i.style.display="Meals"===o?"none":"",a.style.display="Ingredients"===o?"none":"",s.style.display="Ingredients"===o?"none":""}(e),t.classList.add("active-p"),t.classList.remove("notActive-p")):(t.classList.remove("active-p"),t.classList.add("notActive-p"))})}(e)})}),document.querySelectorAll(".custom-select").forEach(e=>{new I(e)}),document.querySelectorAll(".like").forEach(e=>{e.addEventListener("click",re)}),document.querySelectorAll(".dislike").forEach(e=>{e.addEventListener("click",ie)}),S("search-preferences",["#dishes-list-p","#ingredients-list-p"]),S("search-ingredients",["#ingredientsContainer"]),document.getElementById("add-meal-p").addEventListener("click",function(e){!function(){const e=document.getElementById("editMealOverlay"),t=e.querySelector(".form-section");document.body.style.overflow="hidden",e.classList.remove("hidden"),t&&(t.scrollTop=0),async function(){const e=document.getElementById("ingredientsContainer");te.forEach(t=>{const n=le(t.Unit_of_Measurement);e.innerHTML+=`\n    <li class="card ingredient">\n            <input class="checkbox-overlay" type="checkbox">\n            <span class="ingredient-text-p">${t.name}</span>\n            <div class="ingredient-amount-p">\n                <input type="number" class="form-input ingredient" placeholder="0">\n                <span class="amount-text-p">${n}</span>\n            </div>\n    </li>\n  `})}()}(),Ut()}),document.getElementById("closeMealBtn").addEventListener("click",function(e){ue(),Ht()}),document.getElementById("addBtn-p").addEventListener("click",he),document.getElementById("addTagBtn").addEventListener("click",ge),document.getElementById("tagInput").addEventListener("keypress",function(e){"Enter"===e.key&&(e.preventDefault(),ge())}),document.getElementById("editMealOverlay").addEventListener("click",function(e){e.target===this&&(ue(),Ht())}),document.getElementById("navOverlay").addEventListener("click",function(e){(function(){const e=null!=document.querySelector(".meals-container");return e})()&&(ue(),Ht())}),document.getElementById("tagInput").addEventListener("keypress",function(e){"Enter"===e.key&&(e.preventDefault(),ge())}),document.getElementById("editMealOverlay").addEventListener("click",function(e){e.target===this&&(ue(),Ht())}),document.getElementById("add-ingredient-p").addEventListener("click",function(e){!function(){const e=document.getElementById("editIngredientOverlay"),t=e.querySelector(".form-section-ingredient");document.body.style.overflow="hidden",e.classList.remove("hidden"),t&&(t.scrollTop=0)}(),Ut()}),document.getElementById("closeIngredientBtn").addEventListener("click",function(e){pe(),Ht()}),document.getElementById("addIngredientSubmitBtn").addEventListener("click",xe),document.getElementById("editIngredientOverlay").addEventListener("click",function(e){e.target===this&&(pe(),Ht())}),document.getElementById("navOverlay").addEventListener("click",function(e){pe(),Ht()});const n=await L();console.warn("Preferences loaded:",n),function(e){const t=e.blockedDishes,n=e.blockedIngredients,o=e.preferredDishes,r=e.preferredIngredients,i=document.querySelectorAll(".dish-card-p"),a=document.querySelectorAll(".ingredient-card-p");(function(e,t,n){e.forEach(e=>{const o=e.querySelector(".item-id").textContent.trim(),r=e.querySelector(".like"),i=e.querySelector(".dislike");t.includes(parseInt(o,10))&&r.classList.add("favorited"),n.includes(parseInt(o,10))&&i.classList.add("rejected")})})(i,o,t),function(e,t,n){e.forEach(e=>{const o=e.querySelector(".item-id").textContent.trim(),r=e.querySelector(".like"),i=e.querySelector(".dislike");t.includes(parseInt(o,10))&&r.classList.add("favorited"),n.includes(parseInt(o,10))&&i.classList.add("rejected")})}(a,r,n)}(n),se("dish"),se("ingredient")},settings:async function(){const e=document.getElementById("app"),t=await o("./html-pages/settings.html");e.innerHTML=t,Y(document.querySelector(".settings-container")),V&&document.getElementById("app").classList.remove("nativeApp"),function(){const e=document.getElementById("main-nav");e&&(e.classList.add("hiddenNav"),e.classList.remove("showNav"))}(),ve(),J(),function(){!function(){const e=localStorage.getItem("theme")||"light",t=document.querySelector(".custom-select.sex-field");new I(t).setValue();const n=document.querySelector(".custom-select.theme-field");new I(n,e=>{const t=e;localStorage.setItem("theme",t),document.body.classList.toggle("dark-mode","dark"===t),"dark"===t?G():W()}).setValue(e)}();const e=document.getElementById("weight-st");e.addEventListener("keypress",t=>{const n=/^[0-9]*([.,][0-9]*)?$/,o=e.value+t.key;n.test(o)||t.preventDefault()});const t=document.querySelector(".bigger-hitbox-st");t&&t.addEventListener("click",ee);const n=document.querySelectorAll(".card-st-activity");n.forEach(e=>{e.addEventListener("click",function(){n.forEach(e=>e.classList.remove("clicked-st-activity")),this.classList.add("clicked-st-activity")})});const o=document.querySelectorAll(".card-st-goal");o.forEach(e=>{e.addEventListener("click",function(){o.forEach(e=>e.classList.remove("clicked-st-goal")),this.classList.add("clicked-st-goal")})}),document.getElementById("logout-btn").addEventListener("click",u)}(),await async function(){const{gender:e,age:t,weight_kg:n,weight_pounds:o,height_cm:r,height_feet_and_inches:i,activityLevel:a,goal:s}=await b(),c=document.getElementById("height-st"),l=document.getElementById("weight-st"),d=document.getElementById("age-st"),u=document.getElementById("sex-st");c.value=r,l.value=X(n.toFixed(1)),d.value=t,c.placeholder="cm",l.placeholder="kg",d.placeholder="years",u.textContent=e?e.toLowerCase():"",document.querySelectorAll("#activity-container .card-st-activity").forEach(e=>{e.querySelector(".al-text-st").textContent===a?e.classList.add("clicked-st-activity"):e.classList.remove("clicked-st-activity")}),document.querySelectorAll("#goal-container .card-st-goal").forEach(e=>{e.querySelector(".al-text-st").textContent===s?e.classList.add("clicked-st-goal"):e.classList.remove("clicked-st-goal")})}()}};let Nt=localStorage.getItem("lastValidHash")||"#home";async function Ot(){window.location.hash&&""!==window.location.hash||window.history.replaceState(null,null,"#home");const e=window.location.hash.slice(1),t=tt,n=Mt[e]||t;await n(),function(){const e=document.querySelectorAll("#main-nav a");function t(){const t=window.location.hash;e.forEach(e=>{e.getAttribute("href")===t?e.classList.add("active"):e.classList.remove("active")})}t(),window.addEventListener("hashchange",t)}(),"settings"!==e&&Pt(),function(){const e=window.location.hash;"#settings"!==e&&(Nt=e,localStorage.setItem("lastValidHash",e))}(),console.log("Page loaded:",e||"home")}function Pt(){const e=document.getElementById("main-nav");e&&(e.classList.add("showNav"),e.classList.remove("hiddenNav"))}function Ht(){document.getElementById("navOverlay").classList.add("hidden")}function Ut(){document.getElementById("navOverlay").classList.remove("hidden")}window.addEventListener("hashchange",Ot),window.addEventListener("load",Ot)}}});
